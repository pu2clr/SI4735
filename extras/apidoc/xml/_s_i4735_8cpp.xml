<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="_s_i4735_8cpp" kind="file" language="C++">
    <compoundname>SI4735.cpp</compoundname>
    <includes refid="_s_i4735_8h" local="no">SI4735.h</includes>
    <incdepgraph>
      <node id="2">
        <label>SI4735.h</label>
        <link refid="_s_i4735_8h_source"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>SI4735/SI4735.cpp</label>
        <link refid="_s_i4735_8cpp"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>Wire.h</label>
      </node>
      <node id="3">
        <label>Arduino.h</label>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"></codeline>
<codeline lineno="25"><highlight class="preprocessor">#include<sp/>&lt;SI4735.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="class_s_i4735_1a818c60896490631e4311452c99ff361f" refkind="member"><highlight class="normal"><ref refid="class_s_i4735_1a818c60896490631e4311452c99ff361f" kindref="member">SI4735::SI4735</ref>()</highlight></codeline>
<codeline lineno="32"><highlight class="normal">{</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>=<sp/>LSB<sp/>and<sp/>2<sp/>=<sp/>USB;<sp/>0<sp/>=<sp/>AM,<sp/>FM<sp/>or<sp/>WB</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>currentSsbStatus<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="35"><highlight class="normal">}</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="38"><highlight class="comment">*<sp/></highlight></codeline>
<codeline lineno="39"><highlight class="comment">*<sp/>This<sp/>function<sp/>is<sp/>called<sp/>whenever<sp/>the<sp/>Si4735<sp/>changes.<sp/></highlight></codeline>
<codeline lineno="40"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="46" refid="class_s_i4735_1ad2e95c88de0dfa58ff7aa36988071421" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ad2e95c88de0dfa58ff7aa36988071421" kindref="member">SI4735::waitInterrupr</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="47"><highlight class="normal">{</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!data_from_si4735)</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="50"><highlight class="normal">}</highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="class_s_i4735_1a8eddbfb3e62786aa4843d4bcd25da2b9" refkind="member"><highlight class="normal">int16_t<sp/><ref refid="class_s_i4735_1a8eddbfb3e62786aa4843d4bcd25da2b9" kindref="member">SI4735::getDeviceI2CAddress</ref>(uint8_t<sp/>resetPin)<sp/>{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>int16_t<sp/>error;</highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>pinMode(resetPin,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(50);</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(resetPin,<sp/>LOW);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(50);</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(resetPin,<sp/>HIGH);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.begin();</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>0X11<sp/>I2C<sp/>address</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(SI473X_ADDR_SEN_LOW);</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>error<sp/>=<sp/>Wire.endTransmission();<sp/></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>error<sp/>==<sp/>0<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a748a4027f317972cb2fb1aed4865973b" kindref="member">setDeviceI2CAddress</ref>(0);<sp/><sp/></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>SI473X_ADDR_SEN_LOW;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>0X63<sp/>I2C<sp/>address</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(SI473X_ADDR_SEN_HIGH);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>error<sp/>=<sp/>Wire.endTransmission();<sp/><sp/></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>error<sp/>==<sp/>0<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a748a4027f317972cb2fb1aed4865973b" kindref="member">setDeviceI2CAddress</ref>(1);<sp/><sp/></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>SI473X_ADDR_SEN_HIGH;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><sp/></highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Did<sp/>find<sp/>the<sp/>device<sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="92"><highlight class="normal">}</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="109" refid="class_s_i4735_1a748a4027f317972cb2fb1aed4865973b" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a748a4027f317972cb2fb1aed4865973b" kindref="member">SI4735::setDeviceI2CAddress</ref>(uint8_t<sp/>senPin)<sp/>{</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref><sp/>=<sp/>(senPin)?<sp/>SI473X_ADDR_SEN_HIGH<sp/>:<sp/>SI473X_ADDR_SEN_LOW;</highlight></codeline>
<codeline lineno="111"><highlight class="normal">};</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="class_s_i4735_1a668008457910e916ebadf15bda2e5b29" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a668008457910e916ebadf15bda2e5b29" kindref="member">SI4735::setDeviceOtherI2CAddress</ref>(uint8_t<sp/>i2cAddr)<sp/>{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref><sp/>=<sp/>i2cAddr;</highlight></codeline>
<codeline lineno="120"><highlight class="normal">};</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="127" refid="class_s_i4735_1adc6014674bd4d1ee3aab56c605926db1" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1adc6014674bd4d1ee3aab56c605926db1" kindref="member">SI4735::reset</ref>()</highlight></codeline>
<codeline lineno="128"><highlight class="normal">{</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/>pinMode(resetPin,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(10);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(resetPin,<sp/>LOW);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(10);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(resetPin,<sp/>HIGH);</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(10);</highlight></codeline>
<codeline lineno="135"><highlight class="normal">}</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="142" refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">SI4735::waitToSend</ref>()</highlight></codeline>
<codeline lineno="143"><highlight class="normal">{</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMicroseconds(MIN_DELAY_WAIT_SEND_LOOP);<sp/></highlight><highlight class="comment">//<sp/>Need<sp/>check<sp/>the<sp/>minimum<sp/>value.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>1);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!(Wire.read()<sp/>&amp;<sp/>B10000000));</highlight></codeline>
<codeline lineno="149"><highlight class="normal">}</highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight></codeline>
<codeline lineno="164" refid="class_s_i4735_1a8bc001cb28dc8fbd88ba0fa7024eca39" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a8bc001cb28dc8fbd88ba0fa7024eca39" kindref="member">SI4735::setPowerUp</ref>(uint8_t<sp/>CTSIEN,<sp/>uint8_t<sp/>GPO2OEN,<sp/>uint8_t<sp/>PATCH,<sp/>uint8_t<sp/>XOSCEN,<sp/>uint8_t<sp/>FUNC,<sp/>uint8_t<sp/>OPMODE)</highlight></codeline>
<codeline lineno="165"><highlight class="normal">{</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1a21297439eccc575f7c0a3228a4061fa7" kindref="member">CTSIEN</ref><sp/>=<sp/>CTSIEN;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>-&gt;<sp/>Interrupt<sp/>anabled;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1a6da21e782c18e0d15791f712e602bf0f" kindref="member">GPO2OEN</ref><sp/>=<sp/>GPO2OEN;<sp/></highlight><highlight class="comment">//<sp/>1<sp/>-&gt;<sp/>GPO2<sp/>Output<sp/>Enable;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1aff3f1655e972eff4630c66f0b4ec7704" kindref="member">PATCH</ref><sp/>=<sp/>PATCH;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0<sp/>-&gt;<sp/>Boot<sp/>normally;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1ae68c435fb0ff2ad54bc17ac794a482c1" kindref="member">XOSCEN</ref><sp/>=<sp/>XOSCEN;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>-&gt;<sp/>Use<sp/>external<sp/>crystal<sp/>oscillator;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.FUNC<sp/>=<sp/>FUNC;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0<sp/>=<sp/>FM<sp/>Receive;<sp/>1<sp/>=<sp/>AM/SSB<sp/>(LW/MW/SW)<sp/>Receiver.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1a5deeab3cdc44cc652b6e8867dd8e9833" kindref="member">OPMODE</ref><sp/>=<sp/>OPMODE;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0x5<sp/>=<sp/>00000101<sp/>=<sp/>Analog<sp/>audio<sp/>outputs<sp/>(LOUT/ROUT).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>the<sp/>current<sp/>tuning<sp/>frequancy<sp/>mode<sp/>0X20<sp/>=<sp/>FM<sp/>and<sp/>0x40<sp/>=<sp/>AM<sp/>(LW/MW/SW)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>See<sp/>Si47XX<sp/>PROGRAMMING<sp/>GUIDE;<sp/>AN332;<sp/>pages<sp/>55<sp/>and<sp/>124</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(FUNC<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>=<sp/>FM_TUNE_FREQ;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1ad419130c085839f718f6530e18943c23" kindref="member">FREEZE</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>=<sp/>AM_TUNE_FREQ;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1ad419130c085839f718f6530e18943c23" kindref="member">FREEZE</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.FAST<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a0f58c9f3ce774e07a2acc9ba4e968c85" kindref="member">DUMMY1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a9aee8ee0d04a6a7e732210fdea987d2c" kindref="member">ANTCAPH</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a712fdd01147dcef829431bc2fc94a012" kindref="member">ANTCAPL</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="190"><highlight class="normal">}</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="207" refid="class_s_i4735_1a3e228da65641f4dcf4253262e19bde9b" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a3e228da65641f4dcf4253262e19bde9b" kindref="member">SI4735::radioPowerUp</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>delayMicroseconds(1000);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(POWER_UP);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.raw[0]);<sp/></highlight><highlight class="comment">//<sp/>Content<sp/>of<sp/>ARG1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.raw[1]);<sp/></highlight><highlight class="comment">//<sp/>COntent<sp/>of<sp/>ARG2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Delay<sp/>at<sp/>least<sp/>500<sp/>ms<sp/>between<sp/>powerup<sp/>command<sp/>and<sp/>first<sp/>tune<sp/>command<sp/>to<sp/>wait<sp/>for</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>oscillator<sp/>to<sp/>stabilize<sp/>if<sp/>XOSCEN<sp/>is<sp/>set<sp/>and<sp/>crystal<sp/>is<sp/>used<sp/>as<sp/>the<sp/>RCLK.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(10);</highlight></codeline>
<codeline lineno="219"><highlight class="normal">}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="226" refid="class_s_i4735_1a412f51386c47a17cf04fd0a3c3078726" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a412f51386c47a17cf04fd0a3c3078726" kindref="member">SI4735::analogPowerUp</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="227"><highlight class="normal">{</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3e228da65641f4dcf4253262e19bde9b" kindref="member">radioPowerUp</ref>();</highlight></codeline>
<codeline lineno="229"><highlight class="normal">}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="237" refid="class_s_i4735_1aa554b3390fb6c5a4d6661b96afae73ae" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1aa554b3390fb6c5a4d6661b96afae73ae" kindref="member">SI4735::powerDown</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="238"><highlight class="normal">{</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(POWER_DOWN);</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(2500);</highlight></codeline>
<codeline lineno="244"><highlight class="normal">}</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="251" refid="class_s_i4735_1a2fbc7e2187a7c645879623100dbc8502" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a2fbc7e2187a7c645879623100dbc8502" kindref="member">SI4735::getFirmware</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="252"><highlight class="normal">{</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(GET_REV);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Request<sp/>for<sp/>9<sp/>bytes<sp/>response</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>9);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>9;<sp/>i++)</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ad03d545e53a7ca2fe072a7b03d60910e" kindref="member">firmwareInfo</ref>.raw[i]<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1ad03d545e53a7ca2fe072a7b03d60910e" kindref="member">firmwareInfo</ref>.resp.ERR);</highlight></codeline>
<codeline lineno="267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="280" refid="class_s_i4735_1a95fd37277dbb8b16b5ae7a996a5f9eba" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a944ed704e2175a6cf660ad65ca5bbad5" kindref="member">SI4735::setup</ref>(uint8_t<sp/>resetPin,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>interruptPin,<sp/>uint8_t<sp/>defaultFunction,<sp/>uint8_t<sp/>audioMode)</highlight></codeline>
<codeline lineno="281"><highlight class="normal">{</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>interruptEnable<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.begin();</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;resetPin<sp/>=<sp/>resetPin;</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;interruptPin<sp/>=<sp/><ref refid="class_s_i4735_1af8f8123888060f858c74ba08a29ff38b" kindref="member">interruptPin</ref>;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Arduino<sp/>interrupt<sp/>setup<sp/>(you<sp/>have<sp/>to<sp/>know<sp/>which<sp/>Arduino<sp/>Pins<sp/>can<sp/>deal<sp/>with<sp/>interrupt).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1af8f8123888060f858c74ba08a29ff38b" kindref="member">interruptPin</ref><sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pinMode(<ref refid="class_s_i4735_1af8f8123888060f858c74ba08a29ff38b" kindref="member">interruptPin</ref>,<sp/>INPUT);</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>attachInterrupt(digitalPinToInterrupt(<ref refid="class_s_i4735_1af8f8123888060f858c74ba08a29ff38b" kindref="member">interruptPin</ref>),<sp/>interrupt_hundler,<sp/>RISING);</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>interruptEnable<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/>pinMode(resetPin,<sp/>OUTPUT);</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>digitalWrite(resetPin,<sp/>HIGH);</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/>data_from_si4735<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>the<sp/>initial<sp/>SI473X<sp/>behavior</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>CTSIEN<sp/><sp/><sp/>1<sp/>-&gt;<sp/>Interrupt<sp/>anabled<sp/>or<sp/>disable;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>GPO2OEN<sp/><sp/>1<sp/>-&gt;<sp/>GPO2<sp/>Output<sp/>Enable;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>PATCH<sp/><sp/><sp/><sp/>0<sp/>-&gt;<sp/>Boot<sp/>normally;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>XOSCEN<sp/><sp/><sp/>1<sp/>-&gt;<sp/>Use<sp/>external<sp/>crystal<sp/>oscillator;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>FUNC<sp/><sp/><sp/><sp/><sp/>defaultFunction<sp/>=<sp/>0<sp/>=<sp/>FM<sp/>Receive;<sp/>1<sp/>=<sp/>AM<sp/>(LW/MW/SW)<sp/>Receiver.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>OPMODE<sp/><sp/><sp/>SI473X_ANALOG_AUDIO<sp/>or<sp/>SI473X_DIGITAL_AUDIO.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8bc001cb28dc8fbd88ba0fa7024eca39" kindref="member">setPowerUp</ref>(interruptEnable,<sp/>0,<sp/>0,<sp/>1,<sp/>defaultFunction,<sp/>audioMode);</highlight></codeline>
<codeline lineno="309"><highlight class="normal"></highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adc6014674bd4d1ee3aab56c605926db1" kindref="member">reset</ref>();</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3e228da65641f4dcf4253262e19bde9b" kindref="member">radioPowerUp</ref>();</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" kindref="member">setVolume</ref>(30);<sp/></highlight><highlight class="comment">//<sp/>Default<sp/>volume<sp/>level.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a2fbc7e2187a7c645879623100dbc8502" kindref="member">getFirmware</ref>();</highlight></codeline>
<codeline lineno="314"><highlight class="normal">}</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="323" refid="class_s_i4735_1a944ed704e2175a6cf660ad65ca5bbad5" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a944ed704e2175a6cf660ad65ca5bbad5" kindref="member">SI4735::setup</ref>(uint8_t<sp/>resetPin,<sp/>uint8_t<sp/>defaultFunction)</highlight></codeline>
<codeline lineno="324"><highlight class="normal">{</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a944ed704e2175a6cf660ad65ca5bbad5" kindref="member">setup</ref>(resetPin,<sp/>-1,<sp/>defaultFunction);</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(250);</highlight></codeline>
<codeline lineno="327"><highlight class="normal">}</highlight></codeline>
<codeline lineno="328"><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"></highlight></codeline>
<codeline lineno="344" refid="class_s_i4735_1aaceadaaf0835e3db124d1b36f2aebd3c" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1aaceadaaf0835e3db124d1b36f2aebd3c" kindref="member">SI4735::setTuneFrequencyAntennaCapacitor</ref>(uint16_t<sp/>capacitor)</highlight></codeline>
<codeline lineno="345"><highlight class="normal">{</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__antenna__capacitor" kindref="compound">si47x_antenna_capacitor</ref><sp/>cap;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/>cap.value<sp/>=<sp/>capacitor;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a0f58c9f3ce774e07a2acc9ba4e968c85" kindref="member">DUMMY1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>For<sp/>FM,<sp/>the<sp/>capacitor<sp/>value<sp/>has<sp/>just<sp/>one<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a9aee8ee0d04a6a7e732210fdea987d2c" kindref="member">ANTCAPH</ref><sp/>=<sp/>(capacitor<sp/>&lt;=<sp/>191)<sp/>?<sp/>cap.raw.ANTCAPL<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(capacitor<sp/>&lt;=<sp/>6143)</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1ad419130c085839f718f6530e18943c23" kindref="member">FREEZE</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>This<sp/>parameter<sp/>is<sp/>not<sp/>used<sp/>for<sp/>AM</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a9aee8ee0d04a6a7e732210fdea987d2c" kindref="member">ANTCAPH</ref><sp/>=<sp/>cap.raw.<ref refid="unionsi47x__antenna__capacitor_1a26952301dd2779d1976f92c2e521c476" kindref="member">ANTCAPH</ref>;</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a712fdd01147dcef829431bc2fc94a012" kindref="member">ANTCAPL</ref><sp/>=<sp/>cap.raw.ANTCAPL;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="366"><highlight class="normal">}</highlight></codeline>
<codeline lineno="367"><highlight class="normal"></highlight></codeline>
<codeline lineno="377" refid="class_s_i4735_1a63d205f2d3169ba877a2bd2ee28d224f" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a63d205f2d3169ba877a2bd2ee28d224f" kindref="member">SI4735::setFrequency</ref>(uint16_t<sp/>freq)</highlight></codeline>
<codeline lineno="378"><highlight class="normal">{</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();<sp/></highlight><highlight class="comment">//<sp/>Wait<sp/>for<sp/>the<sp/>si473x<sp/>is<sp/>ready.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a4439c40db789f02371ea0fb9b22650c5" kindref="member">currentFrequency</ref>.value<sp/>=<sp/>freq;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a55e3e49406688a65d9e90427ba3290cd" kindref="member">FREQH</ref><sp/>=<sp/><ref refid="class_s_i4735_1a4439c40db789f02371ea0fb9b22650c5" kindref="member">currentFrequency</ref>.raw.<ref refid="unionsi47x__frequency_1ae85fcb4329c600511e2127e1c5029f8c" kindref="member">FREQH</ref>;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a0b7fcda4891b52509b53168d581936e3" kindref="member">FREQL</ref><sp/>=<sp/><ref refid="class_s_i4735_1a4439c40db789f02371ea0fb9b22650c5" kindref="member">currentFrequency</ref>.raw.FREQL;</highlight></codeline>
<codeline lineno="383"><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(currentSsbStatus<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a0f58c9f3ce774e07a2acc9ba4e968c85" kindref="member">DUMMY1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a224ff2b8897867521dc7e83e4a7aadae" kindref="member">USBLSB</ref><sp/>=<sp/>currentSsbStatus;<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>LSB<sp/>or<sp/>USB</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.FAST<sp/>=<sp/>1;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Used<sp/>just<sp/>on<sp/>AM<sp/>and<sp/>FM</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1ad419130c085839f718f6530e18943c23" kindref="member">FREEZE</ref><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Used<sp/>just<sp/>on<sp/>FM</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref>);</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.raw[0]);<sp/></highlight><highlight class="comment">//<sp/>Send<sp/>a<sp/>byte<sp/>with<sp/>FAST<sp/>and<sp/><sp/>FREEZE<sp/>information;<sp/>if<sp/>not<sp/>FM<sp/>must<sp/>be<sp/>0;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a55e3e49406688a65d9e90427ba3290cd" kindref="member">FREQH</ref>);</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a0b7fcda4891b52509b53168d581936e3" kindref="member">FREQL</ref>);</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a9aee8ee0d04a6a7e732210fdea987d2c" kindref="member">ANTCAPH</ref>);</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>current<sp/>tune<sp/>is<sp/>not<sp/>FM<sp/>sent<sp/>one<sp/>more<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>!=<sp/>FM_TUNE_FREQ)</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a8253ae2f3c87a6943776f8a63a691ca3" kindref="member">currentFrequencyParams</ref>.arg.<ref refid="unionsi47x__set__frequency_1a712fdd01147dcef829431bc2fc94a012" kindref="member">ANTCAPL</ref>);</highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Wait<sp/>for<sp/>the<sp/>si473x<sp/>is<sp/>ready.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>=<sp/>freq;<sp/></highlight><highlight class="comment">//<sp/>check<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(MAX_DELAY_AFTER_SET_FREQUENCY);<sp/></highlight><highlight class="comment">//<sp/>For<sp/>some<sp/>reason<sp/>I<sp/>need<sp/>to<sp/>delay<sp/>here.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal">}</highlight></codeline>
<codeline lineno="407"><highlight class="normal"></highlight></codeline>
<codeline lineno="418" refid="class_s_i4735_1a794f6fe7987e146a0135b8e6fabec55c" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a794f6fe7987e146a0135b8e6fabec55c" kindref="member">SI4735::setFrequencyStep</ref>(uint16_t<sp/>step)</highlight></codeline>
<codeline lineno="419"><highlight class="normal">{</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ad72759f246cceb147bf031b72173b0ca" kindref="member">currentStep</ref><sp/>=<sp/>step;</highlight></codeline>
<codeline lineno="421"><highlight class="normal">}</highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight></codeline>
<codeline lineno="428" refid="class_s_i4735_1ac0fcfd64dcf30b11d4dc219d9f7fc5d9" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ac0fcfd64dcf30b11d4dc219d9f7fc5d9" kindref="member">SI4735::frequencyUp</ref>()</highlight></codeline>
<codeline lineno="429"><highlight class="normal">{</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>&gt;=<sp/><ref refid="class_s_i4735_1aa3d41ad3fdb9d821a721a8acfaf47670" kindref="member">currentMaximumFrequency</ref>)</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>=<sp/><ref refid="class_s_i4735_1a4663c1c92d980472556368944cb2fc68" kindref="member">currentMinimumFrequency</ref>;</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>+=<sp/><ref refid="class_s_i4735_1ad72759f246cceb147bf031b72173b0ca" kindref="member">currentStep</ref>;</highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a63d205f2d3169ba877a2bd2ee28d224f" kindref="member">setFrequency</ref>(<ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>);</highlight></codeline>
<codeline lineno="436"><highlight class="normal">}</highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="443" refid="class_s_i4735_1a93fff524a6f900ac91eb1222ce73f9ba" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a93fff524a6f900ac91eb1222ce73f9ba" kindref="member">SI4735::frequencyDown</ref>()</highlight></codeline>
<codeline lineno="444"><highlight class="normal">{</highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>&lt;=<sp/><ref refid="class_s_i4735_1a4663c1c92d980472556368944cb2fc68" kindref="member">currentMinimumFrequency</ref>)</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>=<sp/><ref refid="class_s_i4735_1aa3d41ad3fdb9d821a721a8acfaf47670" kindref="member">currentMaximumFrequency</ref>;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>-=<sp/><ref refid="class_s_i4735_1ad72759f246cceb147bf031b72173b0ca" kindref="member">currentStep</ref>;</highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a63d205f2d3169ba877a2bd2ee28d224f" kindref="member">setFrequency</ref>(<ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>);</highlight></codeline>
<codeline lineno="452"><highlight class="normal">}</highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight></codeline>
<codeline lineno="459" refid="class_s_i4735_1a753390952a1f2c2a98343979f1f3daa0" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a753390952a1f2c2a98343979f1f3daa0" kindref="member">SI4735::setAM</ref>()</highlight></codeline>
<codeline lineno="460"><highlight class="normal">{</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>youre<sp/>already<sp/>using<sp/>AM<sp/>mode,<sp/>you<sp/>dont<sp/>need<sp/>call<sp/>powerDown<sp/>and<sp/>radioPowerUp.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>other<sp/>properties<sp/>also<sp/>should<sp/>have<sp/>the<sp/>same<sp/>value<sp/>as<sp/>the<sp/>previous<sp/>status.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="class_s_i4735_1a157e4ae8cd53396973584aa10888cd47" kindref="member">lastMode</ref><sp/>!=<sp/>AM_CURRENT_MODE<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aa554b3390fb6c5a4d6661b96afae73ae" kindref="member">powerDown</ref>();</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8bc001cb28dc8fbd88ba0fa7024eca39" kindref="member">setPowerUp</ref>(1,<sp/>1,<sp/>0,<sp/>1,<sp/>1,<sp/>SI473X_ANALOG_AUDIO);</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3e228da65641f4dcf4253262e19bde9b" kindref="member">radioPowerUp</ref>();</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a98d12da4b801493a350ecf770f4f2d8b" kindref="member">setAvcAmMaxGain</ref>(<ref refid="class_s_i4735_1a650490ab792c1853c97f600661ecdaa1" kindref="member">currentAvcAmMaxGain</ref>);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>AM<sp/>Automatic<sp/>Volume<sp/>Gain<sp/>to<sp/>48</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" kindref="member">setVolume</ref>(volume);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>previus<sp/>configured<sp/>volume</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/>currentSsbStatus<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a157e4ae8cd53396973584aa10888cd47" kindref="member">lastMode</ref><sp/>=<sp/>AM_CURRENT_MODE;</highlight></codeline>
<codeline lineno="472"><highlight class="normal">}</highlight></codeline>
<codeline lineno="473"><highlight class="normal"></highlight></codeline>
<codeline lineno="479" refid="class_s_i4735_1acd89e7b8adefcbc4e89f802acb915906" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1acd89e7b8adefcbc4e89f802acb915906" kindref="member">SI4735::setFM</ref>()</highlight></codeline>
<codeline lineno="480"><highlight class="normal">{</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aa554b3390fb6c5a4d6661b96afae73ae" kindref="member">powerDown</ref>();</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8bc001cb28dc8fbd88ba0fa7024eca39" kindref="member">setPowerUp</ref>(1,<sp/>1,<sp/>0,<sp/>1,<sp/>0,<sp/>SI473X_ANALOG_AUDIO);</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3e228da65641f4dcf4253262e19bde9b" kindref="member">radioPowerUp</ref>();</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" kindref="member">setVolume</ref>(volume);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>previus<sp/>configured<sp/>volume</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/>currentSsbStatus<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae4683e9a9fc7a633305b18dae54fbd83" kindref="member">disableFmDebug</ref>();</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a157e4ae8cd53396973584aa10888cd47" kindref="member">lastMode</ref><sp/>=<sp/>FM_CURRENT_MODE;</highlight></codeline>
<codeline lineno="488"><highlight class="normal">}</highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight></codeline>
<codeline lineno="500" refid="class_s_i4735_1a43c5ea36995a3897820e0170d94c81f4" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a753390952a1f2c2a98343979f1f3daa0" kindref="member">SI4735::setAM</ref>(uint16_t<sp/>fromFreq,<sp/>uint16_t<sp/>toFreq,<sp/>uint16_t<sp/>initialFreq,<sp/>uint16_t<sp/>step)</highlight></codeline>
<codeline lineno="501"><highlight class="normal">{</highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a4663c1c92d980472556368944cb2fc68" kindref="member">currentMinimumFrequency</ref><sp/>=<sp/>fromFreq;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aa3d41ad3fdb9d821a721a8acfaf47670" kindref="member">currentMaximumFrequency</ref><sp/>=<sp/>toFreq;</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ad72759f246cceb147bf031b72173b0ca" kindref="member">currentStep</ref><sp/>=<sp/>step;</highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(initialFreq<sp/>&lt;<sp/>fromFreq<sp/>||<sp/>initialFreq<sp/>&gt;<sp/>toFreq)</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initialFreq<sp/>=<sp/>fromFreq;</highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a753390952a1f2c2a98343979f1f3daa0" kindref="member">setAM</ref>();</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>=<sp/>initialFreq;</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a63d205f2d3169ba877a2bd2ee28d224f" kindref="member">setFrequency</ref>(<ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>);</highlight></codeline>
<codeline lineno="513"><highlight class="normal">}</highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight></codeline>
<codeline lineno="525" refid="class_s_i4735_1a673bc4b17d564bb6e7f3e9a61d35fbb3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1acd89e7b8adefcbc4e89f802acb915906" kindref="member">SI4735::setFM</ref>(uint16_t<sp/>fromFreq,<sp/>uint16_t<sp/>toFreq,<sp/>uint16_t<sp/>initialFreq,<sp/>uint16_t<sp/>step)</highlight></codeline>
<codeline lineno="526"><highlight class="normal">{</highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a4663c1c92d980472556368944cb2fc68" kindref="member">currentMinimumFrequency</ref><sp/>=<sp/>fromFreq;</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aa3d41ad3fdb9d821a721a8acfaf47670" kindref="member">currentMaximumFrequency</ref><sp/>=<sp/>toFreq;</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ad72759f246cceb147bf031b72173b0ca" kindref="member">currentStep</ref><sp/>=<sp/>step;</highlight></codeline>
<codeline lineno="531"><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(initialFreq<sp/>&lt;<sp/>fromFreq<sp/>||<sp/>initialFreq<sp/>&gt;<sp/>toFreq)</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initialFreq<sp/>=<sp/>fromFreq;</highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1acd89e7b8adefcbc4e89f802acb915906" kindref="member">setFM</ref>();</highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>=<sp/>initialFreq;</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a63d205f2d3169ba877a2bd2ee28d224f" kindref="member">setFrequency</ref>(<ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>);</highlight></codeline>
<codeline lineno="539"><highlight class="normal">}</highlight></codeline>
<codeline lineno="540"><highlight class="normal"></highlight></codeline>
<codeline lineno="558" refid="class_s_i4735_1a8755743a36d2d4662c8db918d02ee4e1" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a8755743a36d2d4662c8db918d02ee4e1" kindref="member">SI4735::setBandwidth</ref>(uint8_t<sp/>AMCHFLT,<sp/>uint8_t<sp/>AMPLFLT)</highlight></codeline>
<codeline lineno="559"><highlight class="normal">{</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__bandwidth__config" kindref="compound">si47x_bandwidth_config</ref><sp/>filter;</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__property" kindref="compound">si47x_property</ref><sp/>property;</highlight></codeline>
<codeline lineno="562"><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)<sp/></highlight><highlight class="comment">//<sp/>Only<sp/>for<sp/>AM/SSB<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(AMCHFLT<sp/>&gt;<sp/>6)</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="568"><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">property</highlight><highlight class="normal">.value<sp/>=<sp/>AM_CHANNEL_FILTER;</highlight></codeline>
<codeline lineno="570"><highlight class="normal"></highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/>filter.param.AMCHFLT<sp/>=<sp/>AMCHFLT;</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/>filter.param.AMPLFLT<sp/>=<sp/>AMPLFLT;</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;volume<sp/>=<sp/>volume;</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SET_PROPERTY);</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Always<sp/>0x00</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteHigh);<sp/></highlight><highlight class="comment">//<sp/>High<sp/>byte<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteLow);<sp/><sp/></highlight><highlight class="comment">//<sp/>Low<sp/>byte<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(filter.raw[1]);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Raw<sp/>data<sp/>for<sp/>AMCHFLT<sp/>and</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(filter.raw[0]);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>AMPLFLT</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="585"><highlight class="normal">}</highlight></codeline>
<codeline lineno="586"><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"></highlight></codeline>
<codeline lineno="593" refid="class_s_i4735_1ae7ca2ffa6ad68ca69e4f35a3c40bbc3c" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ae7ca2ffa6ad68ca69e4f35a3c40bbc3c" kindref="member">SI4735::isCurrentTuneFM</ref>()</highlight></codeline>
<codeline lineno="594"><highlight class="normal">{</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ);</highlight></codeline>
<codeline lineno="596"><highlight class="normal">}</highlight></codeline>
<codeline lineno="597"><highlight class="normal"></highlight></codeline>
<codeline lineno="604" refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">SI4735::sendProperty</ref>(uint16_t<sp/>propertyValue,<sp/>uint16_t<sp/>parameter)</highlight></codeline>
<codeline lineno="605"><highlight class="normal">{</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__property" kindref="compound">si47x_property</ref><sp/>property;</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__property" kindref="compound">si47x_property</ref><sp/>param;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"></highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">property</highlight><highlight class="normal">.value<sp/>=<sp/>propertyValue;</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/>param.value<sp/>=<sp/>parameter;</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SET_PROPERTY);</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteHigh);<sp/></highlight><highlight class="comment">//<sp/>Send<sp/>property<sp/>-<sp/>High<sp/>byte<sp/>-<sp/>most<sp/>significant<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteLow);<sp/><sp/></highlight><highlight class="comment">//<sp/>Send<sp/>property<sp/>-<sp/>Low<sp/>byte<sp/>-<sp/>less<sp/>significant<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(param.raw.byteHigh);<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Send<sp/>the<sp/>argments.<sp/>High<sp/>Byte<sp/>-<sp/>Most<sp/>significant<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(param.raw.byteLow);<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Send<sp/>the<sp/>argments.<sp/>Low<sp/>Byte<sp/>-<sp/>Less<sp/>significant<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(550);</highlight></codeline>
<codeline lineno="621"><highlight class="normal">}</highlight></codeline>
<codeline lineno="622"><highlight class="normal"></highlight></codeline>
<codeline lineno="623"><highlight class="normal"></highlight></codeline>
<codeline lineno="632" refid="class_s_i4735_1ac598865516ca09db7dbfa6a84da7f179" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ac598865516ca09db7dbfa6a84da7f179" kindref="member">SI4735::setFmBlendStereoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="633"><highlight class="normal">{</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_STEREO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="635"><highlight class="normal">}</highlight></codeline>
<codeline lineno="636"><highlight class="normal"></highlight></codeline>
<codeline lineno="645" refid="class_s_i4735_1adf4c5ec4473fd8486dd2ec7a19a10d24" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1adf4c5ec4473fd8486dd2ec7a19a10d24" kindref="member">SI4735::setFmBlendMonoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="646"><highlight class="normal">{</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_MONO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="648"><highlight class="normal">}</highlight></codeline>
<codeline lineno="649"><highlight class="normal"></highlight></codeline>
<codeline lineno="657" refid="class_s_i4735_1ab063630466dccea3becc11d60d122904" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ab063630466dccea3becc11d60d122904" kindref="member">SI4735::setFmBlendRssiStereoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="658"><highlight class="normal">{</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_RSSI_STEREO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="660"><highlight class="normal">}</highlight></codeline>
<codeline lineno="661"><highlight class="normal"></highlight></codeline>
<codeline lineno="670" refid="class_s_i4735_1a1b134a94138b3bf993a5d3eb5f8ed5c6" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a1b134a94138b3bf993a5d3eb5f8ed5c6" kindref="member">SI4735::setFmBLendRssiMonoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="671"><highlight class="normal">{</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_RSSI_MONO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="673"><highlight class="normal">}</highlight></codeline>
<codeline lineno="674"><highlight class="normal"></highlight></codeline>
<codeline lineno="683" refid="class_s_i4735_1a1d1a5eed976370d99827ba55d08b9293" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a1d1a5eed976370d99827ba55d08b9293" kindref="member">SI4735::setFmBlendSnrStereoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="684"><highlight class="normal">{</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_SNR_STEREO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="686"><highlight class="normal">}</highlight></codeline>
<codeline lineno="687"><highlight class="normal"></highlight></codeline>
<codeline lineno="696" refid="class_s_i4735_1ae2c30536e59f6691d990a2b9cf21f07e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ae2c30536e59f6691d990a2b9cf21f07e" kindref="member">SI4735::setFmBLendSnrMonoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="697"><highlight class="normal">{</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_SNR_MONO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="699"><highlight class="normal">}</highlight></codeline>
<codeline lineno="700"><highlight class="normal"></highlight></codeline>
<codeline lineno="709" refid="class_s_i4735_1a0ed776a193fb2fcff783d4a82ff714e5" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a0ed776a193fb2fcff783d4a82ff714e5" kindref="member">SI4735::setFmBlendMultiPathStereoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="710"><highlight class="normal">{</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_MULTIPATH_STEREO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="712"><highlight class="normal">}</highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight></codeline>
<codeline lineno="722" refid="class_s_i4735_1acc9fd27b38f49f167facfcc4f6216c5e" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1acc9fd27b38f49f167facfcc4f6216c5e" kindref="member">SI4735::setFmBlendMultiPathMonoThreshold</ref>(uint8_t<sp/>parameter)</highlight></codeline>
<codeline lineno="723"><highlight class="normal">{</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(FM_BLEND_MULTIPATH_MONO_THRESHOLD,<sp/>parameter);</highlight></codeline>
<codeline lineno="725"><highlight class="normal">}</highlight></codeline>
<codeline lineno="726"><highlight class="normal"></highlight></codeline>
<codeline lineno="730" refid="class_s_i4735_1a59ce1008944ff9a51b6c5baeb3a3e2cb" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a59ce1008944ff9a51b6c5baeb3a3e2cb" kindref="member">SI4735::setFmStereoOff</ref>()</highlight></codeline>
<codeline lineno="731"><highlight class="normal">{</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>TO<sp/>DO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="733"><highlight class="normal">}</highlight></codeline>
<codeline lineno="734"><highlight class="normal"></highlight></codeline>
<codeline lineno="738" refid="class_s_i4735_1a52c7b7b1f0ed9121b0e64516b2bd2a55" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a52c7b7b1f0ed9121b0e64516b2bd2a55" kindref="member">SI4735::setFmStereoOn</ref>()</highlight></codeline>
<codeline lineno="739"><highlight class="normal">{</highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>TO<sp/>DO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="741"><highlight class="normal">}</highlight></codeline>
<codeline lineno="742"><highlight class="normal"></highlight></codeline>
<codeline lineno="750" refid="class_s_i4735_1ae4683e9a9fc7a633305b18dae54fbd83" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ae4683e9a9fc7a633305b18dae54fbd83" kindref="member">SI4735::disableFmDebug</ref>()</highlight></codeline>
<codeline lineno="751"><highlight class="normal">{</highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x12);</highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0xFF);</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(2500);</highlight></codeline>
<codeline lineno="761"><highlight class="normal">}</highlight></codeline>
<codeline lineno="762"><highlight class="normal"></highlight></codeline>
<codeline lineno="763"><highlight class="normal"></highlight></codeline>
<codeline lineno="778" refid="class_s_i4735_1aea652d358b4b586b6d5964ceb8eb7c81" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1aea652d358b4b586b6d5964ceb8eb7c81" kindref="member">SI4735::digitalOutputFormat</ref>(uint8_t<sp/>OSIZE,<sp/>uint8_t<sp/>OMONO,<sp/>uint8_t<sp/>OMODE,<sp/>uint8_t<sp/>OFALL)</highlight></codeline>
<codeline lineno="779"><highlight class="normal">{</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi4735__digital__output__format" kindref="compound">si4735_digital_output_format</ref><sp/>df;</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/>df.refined.OSIZE<sp/>=<sp/>OSIZE;</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/>df.refined.<ref refid="unionsi4735__digital__output__format_1a810bfc21a334fbf3bf53b8dd934bb603" kindref="member">OMONO</ref><sp/>=<sp/>OMONO;</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/>df.refined.<ref refid="unionsi4735__digital__output__format_1ae2f67694a90085fc652649e37b3984b1" kindref="member">OMODE</ref><sp/>=<sp/>OMODE;</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/>df.refined.<ref refid="unionsi4735__digital__output__format_1a43a50ac17d929c197fae422f1fd648e3" kindref="member">OFALL</ref><sp/>=<sp/>OFALL;</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(DIGITAL_OUTPUT_FORMAT,<sp/>df.raw);</highlight></codeline>
<codeline lineno="786"><highlight class="normal">}</highlight></codeline>
<codeline lineno="787"><highlight class="normal"></highlight></codeline>
<codeline lineno="795" refid="class_s_i4735_1a1a404ca11fb32b457be2d7cfe484dd03" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a1a404ca11fb32b457be2d7cfe484dd03" kindref="member">SI4735::digitalOutputSampleRate</ref>(uint16_t<sp/>DOSR)</highlight></codeline>
<codeline lineno="796"><highlight class="normal">{</highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(DIGITAL_OUTPUT_SAMPLE_RATE,<sp/>DOSR);</highlight></codeline>
<codeline lineno="798"><highlight class="normal">}</highlight></codeline>
<codeline lineno="799"><highlight class="normal"></highlight></codeline>
<codeline lineno="800"><highlight class="normal"></highlight></codeline>
<codeline lineno="810" refid="class_s_i4735_1a7e88bb573604d465536c13554d5c61f8" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="class_s_i4735_1a7e88bb573604d465536c13554d5c61f8" kindref="member">SI4735::getFrequency</ref>()</highlight></codeline>
<codeline lineno="811"><highlight class="normal">{</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__frequency" kindref="compound">si47x_frequency</ref><sp/>freq;</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3cf856c44fcfffb3d81b22b1d09b881f" kindref="member">getStatus</ref>(0,<sp/>1);</highlight></codeline>
<codeline lineno="814"><highlight class="normal"></highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/>freq.raw.FREQL<sp/>=<sp/><ref refid="class_s_i4735_1a7ad35ba002b73b66e9ce97b304854695" kindref="member">currentStatus</ref>.resp.<ref refid="unionsi47x__response__status_1a6d5f612fc40df215e9f4c6a94b68e2e6" kindref="member">READFREQL</ref>;</highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/>freq.raw.<ref refid="unionsi47x__frequency_1ae85fcb4329c600511e2127e1c5029f8c" kindref="member">FREQH</ref><sp/>=<sp/><ref refid="class_s_i4735_1a7ad35ba002b73b66e9ce97b304854695" kindref="member">currentStatus</ref>.resp.<ref refid="unionsi47x__response__status_1a7d5ca536d8706e6cc9df2c8d5aea268e" kindref="member">READFREQH</ref>;</highlight></codeline>
<codeline lineno="817"><highlight class="normal"></highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>=<sp/>freq.value;</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>freq.value;</highlight></codeline>
<codeline lineno="820"><highlight class="normal">}</highlight></codeline>
<codeline lineno="821"><highlight class="normal"></highlight></codeline>
<codeline lineno="830" refid="class_s_i4735_1a8240278970ae8bf7283e14714b4329ad" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="class_s_i4735_1a8240278970ae8bf7283e14714b4329ad" kindref="member">SI4735::getCurrentFrequency</ref>()</highlight></codeline>
<codeline lineno="831"><highlight class="normal">{</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>;</highlight></codeline>
<codeline lineno="833"><highlight class="normal">}</highlight></codeline>
<codeline lineno="834"><highlight class="normal"></highlight></codeline>
<codeline lineno="842" refid="class_s_i4735_1a5c0f4036a7fbbd11a26f1f6f4579d3cd" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a3cf856c44fcfffb3d81b22b1d09b881f" kindref="member">SI4735::getStatus</ref>(uint8_t<sp/>INTACK,<sp/>uint8_t<sp/>CANCEL)</highlight></codeline>
<codeline lineno="843"><highlight class="normal">{</highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__tune__status" kindref="compound">si47x_tune_status</ref><sp/>status;</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>cmd<sp/>=<sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)<sp/>?<sp/>FM_TUNE_STATUS<sp/>:<sp/>AM_TUNE_STATUS;</highlight></codeline>
<codeline lineno="846"><highlight class="normal"></highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="848"><highlight class="normal"></highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/>status.arg.INTACK<sp/>=<sp/>INTACK;</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/>status.arg.<ref refid="unionsi47x__tune__status_1ae6d5968d62f9c0eec44528e7b050f0bf" kindref="member">CANCEL</ref><sp/>=<sp/>CANCEL;</highlight></codeline>
<codeline lineno="851"><highlight class="normal"></highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(cmd);</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(status.raw);</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reads<sp/>the<sp/>current<sp/>status<sp/>(including<sp/>current<sp/>frequency).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>8);<sp/></highlight><highlight class="comment">//<sp/>Check<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Gets<sp/>response<sp/>information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7ad35ba002b73b66e9ce97b304854695" kindref="member">currentStatus</ref>.raw[i]<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1a7ad35ba002b73b66e9ce97b304854695" kindref="member">currentStatus</ref>.resp.ERR);<sp/></highlight><highlight class="comment">//<sp/>If<sp/>error,<sp/>try<sp/>it<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="866"><highlight class="normal">}</highlight></codeline>
<codeline lineno="867"><highlight class="normal"></highlight></codeline>
<codeline lineno="873" refid="class_s_i4735_1a3cf856c44fcfffb3d81b22b1d09b881f" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a3cf856c44fcfffb3d81b22b1d09b881f" kindref="member">SI4735::getStatus</ref>()</highlight></codeline>
<codeline lineno="874"><highlight class="normal">{</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3cf856c44fcfffb3d81b22b1d09b881f" kindref="member">getStatus</ref>(0,<sp/>1);</highlight></codeline>
<codeline lineno="876"><highlight class="normal">}</highlight></codeline>
<codeline lineno="877"><highlight class="normal"></highlight></codeline>
<codeline lineno="886" refid="class_s_i4735_1aaae187575b9868ff427c063c3a6cca2a" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1aaae187575b9868ff427c063c3a6cca2a" kindref="member">SI4735::getAutomaticGainControl</ref>()</highlight></codeline>
<codeline lineno="887"><highlight class="normal">{</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>cmd;</highlight></codeline>
<codeline lineno="889"><highlight class="normal"></highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/>{<sp/></highlight><highlight class="comment">//<sp/>FM<sp/>TUNE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd<sp/>=<sp/>FM_AGC_STATUS;</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/>{<sp/></highlight><highlight class="comment">//<sp/>AM<sp/>TUNE<sp/>-<sp/>SAME<sp/>COMMAND<sp/>used<sp/>on<sp/>SSB<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd<sp/>=<sp/>AM_AGC_STATUS;</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="898"><highlight class="normal"></highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="900"><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(cmd);</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="904"><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>3);</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adf2d1f37ec9edf95e14aecb3cdc7417d" kindref="member">currentAgcStatus</ref>.raw[0]<sp/>=<sp/>Wire.read();<sp/></highlight><highlight class="comment">//<sp/>STATUS<sp/>response</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adf2d1f37ec9edf95e14aecb3cdc7417d" kindref="member">currentAgcStatus</ref>.raw[1]<sp/>=<sp/>Wire.read();<sp/></highlight><highlight class="comment">//<sp/>RESP<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adf2d1f37ec9edf95e14aecb3cdc7417d" kindref="member">currentAgcStatus</ref>.raw[2]<sp/>=<sp/>Wire.read();<sp/></highlight><highlight class="comment">//<sp/>RESP<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1adf2d1f37ec9edf95e14aecb3cdc7417d" kindref="member">currentAgcStatus</ref>.refined.ERR);<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>error,<sp/>try<sp/>get<sp/>AGC<sp/>status<sp/>again.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="913"><highlight class="normal">}</highlight></codeline>
<codeline lineno="914"><highlight class="normal"></highlight></codeline>
<codeline lineno="927" refid="class_s_i4735_1a27c22f5671ce3229e925e5fbe93ba0a6" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a27c22f5671ce3229e925e5fbe93ba0a6" kindref="member">SI4735::setAutomaticGainControl</ref>(uint8_t<sp/>AGCDIS,<sp/>uint8_t<sp/>AGCIDX)</highlight></codeline>
<codeline lineno="928"><highlight class="normal">{</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__agc__overrride" kindref="compound">si47x_agc_overrride</ref><sp/>agc;</highlight></codeline>
<codeline lineno="930"><highlight class="normal"></highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>cmd;</highlight></codeline>
<codeline lineno="932"><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd<sp/>=<sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)<sp/>?<sp/>FM_AGC_OVERRIDE<sp/>:<sp/>AM_AGC_OVERRIDE;</highlight></codeline>
<codeline lineno="934"><highlight class="normal"></highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/>agc.arg.AGCDIS<sp/>=<sp/>AGCDIS;</highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/>agc.arg.AGCIDX<sp/>=<sp/>AGCIDX;</highlight></codeline>
<codeline lineno="937"><highlight class="normal"></highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="939"><highlight class="normal"></highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(cmd);</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(agc.raw[0]);</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(agc.raw[1]);</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="945"><highlight class="normal"></highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="947"><highlight class="normal">}</highlight></codeline>
<codeline lineno="948"><highlight class="normal"></highlight></codeline>
<codeline lineno="957" refid="class_s_i4735_1a98d12da4b801493a350ecf770f4f2d8b" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a98d12da4b801493a350ecf770f4f2d8b" kindref="member">SI4735::setAvcAmMaxGain</ref>(<sp/>uint8_t<sp/>gain)<sp/>{</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>aux;</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/>aux<sp/>=<sp/>(<sp/>gain<sp/>&gt;<sp/>12<sp/>&amp;&amp;<sp/>gain<sp/>&lt;<sp/>193<sp/>)?<sp/>(gain<sp/>*<sp/>340)<sp/>:<sp/>(48<sp/>*<sp/>340);</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a650490ab792c1853c97f600661ecdaa1" kindref="member">currentAvcAmMaxGain</ref><sp/>=<sp/><sp/>gain;</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(AM_AUTOMATIC_VOLUME_CONTROL_MAX_GAIN,<sp/>aux);</highlight></codeline>
<codeline lineno="962"><highlight class="normal">}</highlight></codeline>
<codeline lineno="963"><highlight class="normal"></highlight></codeline>
<codeline lineno="975" refid="class_s_i4735_1abf59183da13c72384093fc238c3114cf" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><sp/><ref refid="class_s_i4735_1a7393fa4f9d7811c8d0c0f48283ef6435" kindref="member">SI4735::getCurrentReceivedSignalQuality</ref>(uint8_t<sp/>INTACK)<sp/></highlight></codeline>
<codeline lineno="976"><highlight class="normal">{</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>arg;</highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>cmd;</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sizeResponse;</highlight></codeline>
<codeline lineno="980"><highlight class="normal"></highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/></highlight><highlight class="comment">//<sp/>FM<sp/>TUNE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd<sp/>=<sp/>FM_RSQ_STATUS;</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sizeResponse<sp/>=<sp/>8;<sp/></highlight><highlight class="comment">//<sp/>Check<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{<sp/></highlight><highlight class="comment">//<sp/>AM<sp/>TUNE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd<sp/>=<sp/>AM_RSQ_STATUS;</highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sizeResponse<sp/>=<sp/>6;<sp/></highlight><highlight class="comment">//<sp/>Check<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="990"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="991"><highlight class="normal"></highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="993"><highlight class="normal"></highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>arg<sp/>=<sp/>INTACK;</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(cmd);</highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(arg);<sp/></highlight><highlight class="comment">//<sp/>send<sp/>B00000001</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="999"><highlight class="normal"></highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>sizeResponse);</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Gets<sp/>response<sp/>information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>sizeResponse;<sp/>i++)</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>currentRqsStatus.raw[i]<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}<sp/>while<sp/>(currentRqsStatus.resp.ERR);<sp/>//<sp/>Try<sp/>again<sp/>if<sp/>error<sp/>found</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1009"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"></highlight></codeline>
<codeline lineno="1021" refid="class_s_i4735_1a7393fa4f9d7811c8d0c0f48283ef6435" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a7393fa4f9d7811c8d0c0f48283ef6435" kindref="member">SI4735::getCurrentReceivedSignalQuality</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1022"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7393fa4f9d7811c8d0c0f48283ef6435" kindref="member">getCurrentReceivedSignalQuality</ref>(0);</highlight></codeline>
<codeline lineno="1024"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"></highlight></codeline>
<codeline lineno="1034" refid="class_s_i4735_1a3280b98b8331f00b4d0158ef1b076533" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a3280b98b8331f00b4d0158ef1b076533" kindref="member">SI4735::seekStation</ref>(uint8_t<sp/>SEEKUP,<sp/>uint8_t<sp/>WRAP)</highlight></codeline>
<codeline lineno="1035"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__seek" kindref="compound">si47x_seek</ref><sp/>seek;</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"></highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>which<sp/>FUNCTION<sp/>(AM<sp/>or<sp/>FM)<sp/>is<sp/>working<sp/>now</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>seek_start<sp/>=<sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)<sp/>?<sp/>FM_SEEK_START<sp/>:<sp/>AM_SEEK_START;</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"></highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"></highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/>seek.arg.<ref refid="unionsi47x__seek_1acd509f67721224c4b0ad0ebdfad56dad" kindref="member">SEEKUP</ref><sp/>=<sp/>SEEKUP;</highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/>seek.arg.WRAP<sp/>=<sp/>WRAP;</highlight></codeline>
<codeline lineno="1045"><highlight class="normal"></highlight></codeline>
<codeline lineno="1046"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(seek_start);</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(seek.raw);</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"></highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(seek_start<sp/>==<sp/>AM_SEEK_START)</highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/></highlight><highlight class="comment">//<sp/>Always<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/></highlight><highlight class="comment">//<sp/>Always<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/></highlight><highlight class="comment">//<sp/>Tuning<sp/>Capacitor:<sp/>The<sp/>tuning<sp/>capacitor<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>will<sp/>be<sp/>selected<sp/>automatically.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1056"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"></highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(100);</highlight></codeline>
<codeline lineno="1060"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1061"><highlight class="normal"></highlight></codeline>
<codeline lineno="1067" refid="class_s_i4735_1aad5211e3fff28141473442f59008e415" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1aad5211e3fff28141473442f59008e415" kindref="member">SI4735::seekStationUp</ref>()</highlight></codeline>
<codeline lineno="1068"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3280b98b8331f00b4d0158ef1b076533" kindref="member">seekStation</ref>(1,<sp/>1);</highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(50);</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7e88bb573604d465536c13554d5c61f8" kindref="member">getFrequency</ref>();</highlight></codeline>
<codeline lineno="1072"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"></highlight></codeline>
<codeline lineno="1079" refid="class_s_i4735_1a1eeaa09670cdbdc7ddd724c940d2506b" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a1eeaa09670cdbdc7ddd724c940d2506b" kindref="member">SI4735::seekStationDown</ref>()</highlight></codeline>
<codeline lineno="1080"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3280b98b8331f00b4d0158ef1b076533" kindref="member">seekStation</ref>(0,<sp/>1);</highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/>delay(50);</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7e88bb573604d465536c13554d5c61f8" kindref="member">getFrequency</ref>();</highlight></codeline>
<codeline lineno="1084"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"></highlight></codeline>
<codeline lineno="1094" refid="class_s_i4735_1a6b901d5cd729364dbda6e5b811dc9ec2" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a6b901d5cd729364dbda6e5b811dc9ec2" kindref="member">SI4735::setSeekAmLimits</ref>(uint16_t<sp/>bottom,<sp/>uint16_t<sp/>top)</highlight></codeline>
<codeline lineno="1095"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(AM_SEEK_BAND_BOTTOM,<sp/>bottom);</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(AM_SEEK_BAND_TOP,<sp/>top);</highlight></codeline>
<codeline lineno="1098"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1099"><highlight class="normal"></highlight></codeline>
<codeline lineno="1107" refid="class_s_i4735_1a6f8218c0bbdcb75ea54bc8af2a60dcc6" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a6f8218c0bbdcb75ea54bc8af2a60dcc6" kindref="member">SI4735::setSeekAmSpacing</ref>(uint16_t<sp/>spacing)</highlight></codeline>
<codeline lineno="1108"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(AM_SEEK_FREQ_SPACING,<sp/>spacing);</highlight></codeline>
<codeline lineno="1110"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1111"><highlight class="normal"></highlight></codeline>
<codeline lineno="1118" refid="class_s_i4735_1aeef76371500acdbdc17ca8dc980e1fff" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1aeef76371500acdbdc17ca8dc980e1fff" kindref="member">SI4735::setSeekSrnThreshold</ref>(uint16_t<sp/>value)</highlight></codeline>
<codeline lineno="1119"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(AM_SEEK_SNR_THRESHOLD,<sp/>value);</highlight></codeline>
<codeline lineno="1121"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"></highlight></codeline>
<codeline lineno="1129" refid="class_s_i4735_1a13397b273f7ab6fa7d5f48f116edac9b" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a13397b273f7ab6fa7d5f48f116edac9b" kindref="member">SI4735::setSeekRssiThreshold</ref>(uint16_t<sp/>value)</highlight></codeline>
<codeline lineno="1130"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(AM_SEEK_RSSI_THRESHOLD,<sp/>value);</highlight></codeline>
<codeline lineno="1132"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"></highlight></codeline>
<codeline lineno="1141" refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" kindref="member">SI4735::setVolume</ref>(uint8_t<sp/>volume)</highlight></codeline>
<codeline lineno="1142"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(RX_VOLUME,<sp/>volume);</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;volume<sp/>=<sp/>volume;</highlight></codeline>
<codeline lineno="1145"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"></highlight></codeline>
<codeline lineno="1154" refid="class_s_i4735_1a12d4e173d096b1568e4209a63534d4f6" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a12d4e173d096b1568e4209a63534d4f6" kindref="member">SI4735::setAudioMute</ref>(<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>off)<sp/>{</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>value<sp/>=<sp/>(off)?<sp/>3:0;<sp/></highlight><highlight class="comment">//<sp/>3<sp/>means<sp/>mute;<sp/>0<sp/>means<sp/>unmute<sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae351181347f8c512b625d98ef7844961" kindref="member">sendProperty</ref>(RX_HARD_MUTE,<sp/>value);</highlight></codeline>
<codeline lineno="1157"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"></highlight></codeline>
<codeline lineno="1166" refid="class_s_i4735_1acf79be50a01fe91abd498e5d42d83317" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="class_s_i4735_1acf79be50a01fe91abd498e5d42d83317" kindref="member">SI4735::getVolume</ref>()</highlight></codeline>
<codeline lineno="1167"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>this-&gt;volume;</highlight></codeline>
<codeline lineno="1169"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"></highlight></codeline>
<codeline lineno="1176" refid="class_s_i4735_1a5e3e8cf04ca99c6be2dbe15d72b4efa3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a5e3e8cf04ca99c6be2dbe15d72b4efa3" kindref="member">SI4735::volumeUp</ref>()</highlight></codeline>
<codeline lineno="1177"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(volume<sp/>&lt;<sp/>63)</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>volume++;</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" kindref="member">setVolume</ref>(volume);</highlight></codeline>
<codeline lineno="1181"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"></highlight></codeline>
<codeline lineno="1188" refid="class_s_i4735_1a23d49ab35895b76e0898405fac086c09" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a23d49ab35895b76e0898405fac086c09" kindref="member">SI4735::volumeDown</ref>()</highlight></codeline>
<codeline lineno="1189"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(volume<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>volume--;</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" kindref="member">setVolume</ref>(volume);</highlight></codeline>
<codeline lineno="1193"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"></highlight></codeline>
<codeline lineno="1195"><highlight class="normal"></highlight></codeline>
<codeline lineno="1202" refid="class_s_i4735_1affdba9ca9fb9bf5bb671ac3d448a7e89" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1affdba9ca9fb9bf5bb671ac3d448a7e89" kindref="member">SI4735::RdsInit</ref>()</highlight></codeline>
<codeline lineno="1203"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ac65c552004f5e5e646638e37a5a68213" kindref="member">clearRdsBuffer2A</ref>();</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aed0988165057aa2880f41b88ac236cd7" kindref="member">clearRdsBuffer2B</ref>();</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adede134b96fd5650b87673ce413babb2" kindref="member">clearRdsBuffer0A</ref>();</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>=<sp/><ref refid="class_s_i4735_1adecc2478d73cd7d18e1f88fd70d1488d" kindref="member">rdsTextAdress2B</ref><sp/>=<sp/><ref refid="class_s_i4735_1abd965c0e49493bc2c7c37547d36dcc96" kindref="member">lastTextFlagAB</ref><sp/>=<sp/><ref refid="class_s_i4735_1a11477d1eb13efb348395a4984b67f392" kindref="member">rdsTextAdress0A</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1208"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"></highlight></codeline>
<codeline lineno="1214" refid="class_s_i4735_1ac65c552004f5e5e646638e37a5a68213" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ac65c552004f5e5e646638e37a5a68213" kindref="member">SI4735::clearRdsBuffer2A</ref>()</highlight></codeline>
<codeline lineno="1215"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>65;<sp/>i++)</highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rds_buffer2A[i]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>Radio<sp/>Text<sp/>buffer<sp/>-<sp/>Program<sp/>Information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1218"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"></highlight></codeline>
<codeline lineno="1224" refid="class_s_i4735_1aed0988165057aa2880f41b88ac236cd7" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1aed0988165057aa2880f41b88ac236cd7" kindref="member">SI4735::clearRdsBuffer2B</ref>()</highlight></codeline>
<codeline lineno="1225"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>33;<sp/>i++)</highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7aa607f80e97d45ac7a80cdcbdeb09f9" kindref="member">rds_buffer2B</ref>[i]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>Radio<sp/>Text<sp/>buffer<sp/>-<sp/>Station<sp/>Informaation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1228"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1233" refid="class_s_i4735_1adede134b96fd5650b87673ce413babb2" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1adede134b96fd5650b87673ce413babb2" kindref="member">SI4735::clearRdsBuffer0A</ref>()</highlight></codeline>
<codeline lineno="1234"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>9;<sp/>i++)</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ac24a8bbd39628c2981208cb452165a0e" kindref="member">rds_buffer0A</ref>[i]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>Station<sp/>Name<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1237"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"></highlight></codeline>
<codeline lineno="1266" refid="class_s_i4735_1ad9718a85c79a311c26997bbda20f2351" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ad9718a85c79a311c26997bbda20f2351" kindref="member">SI4735::setRdsConfig</ref>(uint8_t<sp/>RDSEN,<sp/>uint8_t<sp/>BLETHA,<sp/>uint8_t<sp/>BLETHB,<sp/>uint8_t<sp/>BLETHC,<sp/>uint8_t<sp/>BLETHD)</highlight></codeline>
<codeline lineno="1267"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__property" kindref="compound">si47x_property</ref><sp/>property;</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__config" kindref="compound">si47x_rds_config</ref><sp/>config;</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"></highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"></highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>property<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">property</highlight><highlight class="normal">.value<sp/>=<sp/>FM_RDS_CONFIG;</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"></highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Arguments</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/>config.arg.RDSEN<sp/>=<sp/>RDSEN;</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/><sp/>config.arg.<ref refid="unionsi47x__rds__config_1a985f772fda4648f338757b919de189f0" kindref="member">BLETHA</ref><sp/>=<sp/>BLETHA;</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/>config.arg.<ref refid="unionsi47x__rds__config_1a8fde60b58e168d978e259f3899ce5e0b" kindref="member">BLETHB</ref><sp/>=<sp/>BLETHB;</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/>config.arg.<ref refid="unionsi47x__rds__config_1a2a243d520165c64e15fbad8b7ac2f5d9" kindref="member">BLETHC</ref><sp/>=<sp/>BLETHC;</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/>config.arg.BLETHD<sp/>=<sp/>BLETHD;</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><sp/><sp/><sp/><sp/>config.arg.<ref refid="unionsi47x__rds__config_1a849a3b2c92974fdfb9542db006e0976d" kindref="member">DUMMY1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1283"><highlight class="normal"></highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SET_PROPERTY);</highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Always<sp/>0x00<sp/>(I<sp/>need<sp/>to<sp/>check<sp/>it)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1287"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteHigh);<sp/></highlight><highlight class="comment">//<sp/>Send<sp/>property<sp/>-<sp/>High<sp/>byte<sp/>-<sp/>most<sp/>significant<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteLow);<sp/><sp/></highlight><highlight class="comment">//<sp/>Low<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1289"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(config.raw[1]);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Send<sp/>the<sp/>argments.<sp/>Most<sp/>significant<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(config.raw[0]);</highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(550);</highlight></codeline>
<codeline lineno="1293"><highlight class="normal"></highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1affdba9ca9fb9bf5bb671ac3d448a7e89" kindref="member">RdsInit</ref>();<sp/></highlight></codeline>
<codeline lineno="1295"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1296"><highlight class="normal"></highlight></codeline>
<codeline lineno="1310" refid="class_s_i4735_1a530e64d00d95b4ceb13ce33aa74c63cb" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a530e64d00d95b4ceb13ce33aa74c63cb" kindref="member">SI4735::setRdsIntSource</ref>(uint8_t<sp/>RDSNEWBLOCKB,<sp/>uint8_t<sp/>RDSNEWBLOCKA,<sp/>uint8_t<sp/>RDSSYNCFOUND,<sp/>uint8_t<sp/>RDSSYNCLOST,<sp/>uint8_t<sp/>RDSRECV)</highlight></codeline>
<codeline lineno="1311"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__property" kindref="compound">si47x_property</ref><sp/>property;</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__int__source" kindref="compound">si47x_rds_int_source</ref><sp/>rds_int_source;</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"></highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>!=<sp/>FM_TUNE_FREQ)</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"></highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_int_source.refined.<ref refid="unionsi47x__rds__int__source_1abe78350d5e3cb85a60859f52ce279efd" kindref="member">RDSNEWBLOCKB</ref><sp/>=<sp/>RDSNEWBLOCKB;</highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_int_source.refined.<ref refid="unionsi47x__rds__int__source_1a6363c0e46e99336e8381bc0cc4ccacf7" kindref="member">RDSNEWBLOCKA</ref><sp/>=<sp/>RDSNEWBLOCKA;</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_int_source.refined.<ref refid="unionsi47x__rds__int__source_1adb4e16cc0024b4c0338d163a83ec43ec" kindref="member">RDSSYNCFOUND</ref><sp/>=<sp/>RDSSYNCFOUND;</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_int_source.refined.<ref refid="unionsi47x__rds__int__source_1a0bb106ab53cfba94833fefd596a5d1cf" kindref="member">RDSSYNCLOST</ref><sp/>=<sp/>RDSSYNCLOST;</highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_int_source.refined.RDSRECV<sp/>=<sp/>RDSRECV;</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_int_source.refined.<ref refid="unionsi47x__rds__int__source_1ac5de9b6d946471e6ff768bd87988125b" kindref="member">DUMMY1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_int_source.refined.<ref refid="unionsi47x__rds__int__source_1a1244e55bf5f7da541ebc7ef17880ffaa" kindref="member">DUMMY2</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"></highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">property</highlight><highlight class="normal">.value<sp/>=<sp/>FM_RDS_INT_SOURCE;</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"></highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"></highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SET_PROPERTY);</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Always<sp/>0x00<sp/>(I<sp/>need<sp/>to<sp/>check<sp/>it)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteHigh);<sp/></highlight><highlight class="comment">//<sp/>Send<sp/>property<sp/>-<sp/>High<sp/>byte<sp/>-<sp/>most<sp/>significant<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteLow);<sp/><sp/></highlight><highlight class="comment">//<sp/>Low<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(rds_int_source.raw[1]);<sp/></highlight><highlight class="comment">//<sp/>Send<sp/>the<sp/>argments.<sp/>Most<sp/>significant<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(rds_int_source.raw[0]);</highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1339"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1340"><highlight class="normal"></highlight></codeline>
<codeline lineno="1351" refid="class_s_i4735_1a350a2033671a7620d4b9290a2347e185" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a94cce3834f85fc127e8c2dab3a03e875" kindref="member">SI4735::getRdsStatus</ref>(uint8_t<sp/>INTACK,<sp/>uint8_t<sp/>MTFIFO,<sp/>uint8_t<sp/>STATUSONLY)</highlight></codeline>
<codeline lineno="1352"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1353"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__command" kindref="compound">si47x_rds_command</ref><sp/>rds_cmd;</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint16_t<sp/>lastFreq;</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>checking<sp/>current<sp/>FUNC<sp/>(Am<sp/>or<sp/>FM)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>!=<sp/>FM_TUNE_FREQ)</highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1358"><highlight class="normal"></highlight></codeline>
<codeline lineno="1359"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lastFreq<sp/>!=<sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>)</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lastFreq<sp/>=<sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>;</highlight></codeline>
<codeline lineno="1362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ac65c552004f5e5e646638e37a5a68213" kindref="member">clearRdsBuffer2A</ref>();</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aed0988165057aa2880f41b88ac236cd7" kindref="member">clearRdsBuffer2B</ref>();</highlight></codeline>
<codeline lineno="1364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adede134b96fd5650b87673ce413babb2" kindref="member">clearRdsBuffer0A</ref>();</highlight></codeline>
<codeline lineno="1365"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"></highlight></codeline>
<codeline lineno="1367"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1368"><highlight class="normal"></highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_cmd.arg.INTACK<sp/>=<sp/>INTACK;</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_cmd.arg.MTFIFO<sp/>=<sp/>MTFIFO;</highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/><sp/>rds_cmd.arg.STATUSONLY<sp/>=<sp/>STATUSONLY;</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"></highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(FM_RDS_STATUS);</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(rds_cmd.raw);</highlight></codeline>
<codeline lineno="1376"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="1377"><highlight class="normal"></highlight></codeline>
<codeline lineno="1378"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Gets<sp/>response<sp/>information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>13);</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(uint8_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>13;<sp/>i++)</highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.raw[i]<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="1385"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.ERR);</highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(550);</highlight></codeline>
<codeline lineno="1387"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1388"><highlight class="normal"></highlight></codeline>
<codeline lineno="1398" refid="class_s_i4735_1a94cce3834f85fc127e8c2dab3a03e875" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a94cce3834f85fc127e8c2dab3a03e875" kindref="member">SI4735::getRdsStatus</ref>()</highlight></codeline>
<codeline lineno="1399"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a94cce3834f85fc127e8c2dab3a03e875" kindref="member">getRdsStatus</ref>(0,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="1401"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1402"><highlight class="normal"></highlight></codeline>
<codeline lineno="1403"><highlight class="normal"></highlight><highlight class="comment">//<sp/>See<sp/>inlines<sp/>methods<sp/>/<sp/>functions<sp/>on<sp/>SI4735.h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1404"><highlight class="normal"></highlight></codeline>
<codeline lineno="1413" refid="class_s_i4735_1af1e67b201799a9e8d7208a32a65656b5" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="class_s_i4735_1af1e67b201799a9e8d7208a32a65656b5" kindref="member">SI4735::getRdsPI</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1414"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(getRdsReceived()<sp/>&amp;&amp;<sp/><ref refid="class_s_i4735_1a561a052a8c737302368274c774d8c129" kindref="member">getRdsNewBlockA</ref>())</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1a307a99811323be2c6e64bf2473aaa8f2" kindref="member">BLOCKAL</ref>;</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1420"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1421"><highlight class="normal"></highlight></codeline>
<codeline lineno="1425" refid="class_s_i4735_1aa35366e5cded7b864f7268a7e4a8dbe9" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="class_s_i4735_1aa35366e5cded7b864f7268a7e4a8dbe9" kindref="member">SI4735::getRdsGroupType</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1426"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkb;</highlight></codeline>
<codeline lineno="1428"><highlight class="normal"></highlight></codeline>
<codeline lineno="1429"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1431"><highlight class="normal"></highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>blkb.refined.groupType;</highlight></codeline>
<codeline lineno="1433"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"></highlight></codeline>
<codeline lineno="1435"><highlight class="normal"></highlight></codeline>
<codeline lineno="1441" refid="class_s_i4735_1a05f76a0a0ebda813483f1df24e890904" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="class_s_i4735_1a05f76a0a0ebda813483f1df24e890904" kindref="member">SI4735::getRdsFlagAB</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1442"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1443"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkb;</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"></highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1447"><highlight class="normal"></highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>blkb.refined.textABFlag;</highlight></codeline>
<codeline lineno="1449"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1450"><highlight class="normal"></highlight></codeline>
<codeline lineno="1451"><highlight class="normal"></highlight></codeline>
<codeline lineno="1461" refid="class_s_i4735_1ab1ed04a109330e7e9206483c7cdf5ef9" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="class_s_i4735_1ab1ed04a109330e7e9206483c7cdf5ef9" kindref="member">SI4735::getRdsTextSegmentAddress</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1462"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkb;</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"></highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>blkb.refined.content;</highlight></codeline>
<codeline lineno="1468"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1469"><highlight class="normal"></highlight></codeline>
<codeline lineno="1475" refid="class_s_i4735_1af9b6cb614d1b01b11bb23c19e6deb8b9" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="class_s_i4735_1af9b6cb614d1b01b11bb23c19e6deb8b9" kindref="member">SI4735::getRdsVersionCode</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1476"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkb;</highlight></codeline>
<codeline lineno="1478"><highlight class="normal"></highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1481"><highlight class="normal"></highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>blkb.refined.versionCode;</highlight></codeline>
<codeline lineno="1483"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1484"><highlight class="normal"></highlight></codeline>
<codeline lineno="1492" refid="class_s_i4735_1ac28fa3818d4f900c4f4ba6be10c1405b" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="class_s_i4735_1ac28fa3818d4f900c4f4ba6be10c1405b" kindref="member">SI4735::getRdsProgramType</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1493"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkb;</highlight></codeline>
<codeline lineno="1495"><highlight class="normal"></highlight></codeline>
<codeline lineno="1496"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1497"><highlight class="normal"><sp/><sp/><sp/><sp/>blkb.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1498"><highlight class="normal"></highlight></codeline>
<codeline lineno="1499"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>blkb.refined.programType;</highlight></codeline>
<codeline lineno="1500"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1501"><highlight class="normal"></highlight></codeline>
<codeline lineno="1507" refid="class_s_i4735_1ab1f4f137139b40fe386ca51586999e50" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ab1f4f137139b40fe386ca51586999e50" kindref="member">SI4735::getNext2Block</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*c)</highlight></codeline>
<codeline lineno="1508"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1509"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>raw[2];</highlight></codeline>
<codeline lineno="1510"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i,<sp/>j;</highlight></codeline>
<codeline lineno="1511"><highlight class="normal"></highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/><sp/>raw[1]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ab2c92efdeed49c5fe867771fb5cd5862" kindref="member">BLOCKDL</ref>;</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/>raw[0]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1a6e7bcc48e5ad38ae9a4754d90735e0eb" kindref="member">BLOCKDH</ref>;</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"></highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>j<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>2;<sp/>i++)</highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(raw[i]<sp/>==<sp/>0xD<sp/>||<sp/>raw[i]<sp/>==<sp/>0xA)</highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c[j]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(raw[i]<sp/>&gt;=<sp/>32)</highlight></codeline>
<codeline lineno="1523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c[j]<sp/>=<sp/>raw[i];</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>j++;</highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c[i]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1531"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1532"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"></highlight></codeline>
<codeline lineno="1539" refid="class_s_i4735_1adb0a3c39aeacba0faf39aadd9465021f" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1adb0a3c39aeacba0faf39aadd9465021f" kindref="member">SI4735::getNext4Block</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*c)</highlight></codeline>
<codeline lineno="1540"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>raw[4];</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i,<sp/>j;</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"></highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/>raw[0]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1acb3be1a907d57f35a5db5dc79d1c4603" kindref="member">BLOCKCH</ref>;</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/>raw[1]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1a9e02b88bb18b2111798c346c3f40e599" kindref="member">BLOCKCL</ref>;</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/>raw[2]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1a6e7bcc48e5ad38ae9a4754d90735e0eb" kindref="member">BLOCKDH</ref>;</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/>raw[3]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ab2c92efdeed49c5fe867771fb5cd5862" kindref="member">BLOCKDL</ref>;</highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>j<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>4;<sp/>i++)</highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(raw[i]<sp/>==<sp/>0xD<sp/>||<sp/>raw[i]<sp/>==<sp/>0xA)</highlight></codeline>
<codeline lineno="1551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c[j]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(raw[i]<sp/>&gt;=<sp/>32)</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c[j]<sp/>=<sp/>raw[i];</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>j++;</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>c[i]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;<sp/>&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1565"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1566"><highlight class="normal"></highlight></codeline>
<codeline lineno="1567"><highlight class="normal"></highlight></codeline>
<codeline lineno="1573" refid="class_s_i4735_1a71cbaa3e0c103db7cee5969d162bec5d" refkind="member"><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="class_s_i4735_1a71cbaa3e0c103db7cee5969d162bec5d" kindref="member">SI4735::getRdsText</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1574"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"></highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Needs<sp/>to<sp/>get<sp/>the<sp/>&quot;Text<sp/>segment<sp/>address<sp/>code&quot;.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Each<sp/>message<sp/>should<sp/>be<sp/>ended<sp/>by<sp/>the<sp/>code<sp/>0D<sp/>(Hex)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1578"><highlight class="normal"></highlight></codeline>
<codeline lineno="1579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>&gt;=<sp/>16)</highlight></codeline>
<codeline lineno="1580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1581"><highlight class="normal"></highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adb0a3c39aeacba0faf39aadd9465021f" kindref="member">getNext4Block</ref>(&amp;rds_buffer2A[<ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>*<sp/>4]);</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"></highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>+=<sp/>4;</highlight></codeline>
<codeline lineno="1585"><highlight class="normal"></highlight></codeline>
<codeline lineno="1586"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rds_buffer2A;</highlight></codeline>
<codeline lineno="1587"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1588"><highlight class="normal"></highlight></codeline>
<codeline lineno="1595" refid="class_s_i4735_1a12d917629b78fffebac5ecf8f2936921" refkind="member"><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="class_s_i4735_1a12d917629b78fffebac5ecf8f2936921" kindref="member">SI4735::getRdsText0A</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1596"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkB;</highlight></codeline>
<codeline lineno="1598"><highlight class="normal"></highlight></codeline>
<codeline lineno="1599"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>getRdsStatus();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1600"><highlight class="normal"></highlight></codeline>
<codeline lineno="1601"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(getRdsReceived())</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1aa35366e5cded7b864f7268a7e4a8dbe9" kindref="member">getRdsGroupType</ref>()<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="1604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>group<sp/>type<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blkB.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blkB.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1608"><highlight class="normal"></highlight></codeline>
<codeline lineno="1609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a11477d1eb13efb348395a4984b67f392" kindref="member">rdsTextAdress0A</ref><sp/>=<sp/>blkB.group0.address;</highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1a11477d1eb13efb348395a4984b67f392" kindref="member">rdsTextAdress0A</ref><sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/><ref refid="class_s_i4735_1a11477d1eb13efb348395a4984b67f392" kindref="member">rdsTextAdress0A</ref><sp/>&lt;<sp/>4)</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ab1f4f137139b40fe386ca51586999e50" kindref="member">getNext2Block</ref>(&amp;<ref refid="class_s_i4735_1ac24a8bbd39628c2981208cb452165a0e" kindref="member">rds_buffer0A</ref>[<ref refid="class_s_i4735_1a11477d1eb13efb348395a4984b67f392" kindref="member">rdsTextAdress0A</ref><sp/>*<sp/>2]);</highlight></codeline>
<codeline lineno="1613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ac24a8bbd39628c2981208cb452165a0e" kindref="member">rds_buffer0A</ref>[8]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ac24a8bbd39628c2981208cb452165a0e" kindref="member">rds_buffer0A</ref>;</highlight></codeline>
<codeline lineno="1615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1617"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1618"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1619"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"></highlight></codeline>
<codeline lineno="1626" refid="class_s_i4735_1ae54d0f5562ca7615c3b90bee00c29ab4" refkind="member"><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="class_s_i4735_1ae54d0f5562ca7615c3b90bee00c29ab4" kindref="member">SI4735::getRdsText2A</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1627"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1628"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkB;</highlight></codeline>
<codeline lineno="1629"><highlight class="normal"></highlight></codeline>
<codeline lineno="1630"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>getRdsStatus();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1631"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(getRdsReceived())</highlight></codeline>
<codeline lineno="1632"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1aa35366e5cded7b864f7268a7e4a8dbe9" kindref="member">getRdsGroupType</ref>()<sp/>==<sp/>2<sp/></highlight><highlight class="comment">/*<sp/>&amp;&amp;<sp/>getRdsVersionCode()<sp/>==<sp/>0<sp/>*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>group<sp/>2A</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Decode<sp/>B<sp/>block<sp/>information</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blkB.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blkB.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>=<sp/>blkB.group2.address;</highlight></codeline>
<codeline lineno="1640"><highlight class="normal"></highlight></codeline>
<codeline lineno="1641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/><ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>&lt;<sp/>16)</highlight></codeline>
<codeline lineno="1642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adb0a3c39aeacba0faf39aadd9465021f" kindref="member">getNext4Block</ref>(&amp;rds_buffer2A[<ref refid="class_s_i4735_1a1c7ec3559a78c5ef1bda49cb0abdf1de" kindref="member">rdsTextAdress2A</ref><sp/>*<sp/>4]);</highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rds_buffer2A[63]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rds_buffer2A;</highlight></codeline>
<codeline lineno="1646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1649"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1650"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1651"><highlight class="normal"></highlight></codeline>
<codeline lineno="1652"><highlight class="normal"></highlight></codeline>
<codeline lineno="1658" refid="class_s_i4735_1a806d5cfbbeb6ca1299ce20b1220fdb18" refkind="member"><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="class_s_i4735_1a806d5cfbbeb6ca1299ce20b1220fdb18" kindref="member">SI4735::getRdsText2B</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1659"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1660"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__blockb" kindref="compound">si47x_rds_blockb</ref><sp/>blkB;</highlight></codeline>
<codeline lineno="1661"><highlight class="normal"></highlight></codeline>
<codeline lineno="1662"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>getRdsStatus();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1663"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>(getRdsReceived())</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1664"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1665"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>(getRdsNewBlockB())</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1666"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1667"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1aa35366e5cded7b864f7268a7e4a8dbe9" kindref="member">getRdsGroupType</ref>()<sp/>==<sp/>2<sp/></highlight><highlight class="comment">/*<sp/>&amp;&amp;<sp/>getRdsVersionCode()<sp/>==<sp/>1<sp/>*/</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="1668"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Process<sp/>group<sp/>2B</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blkB.raw.highValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>blkB.raw.lowValue<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adecc2478d73cd7d18e1f88fd70d1488d" kindref="member">rdsTextAdress2B</ref><sp/>=<sp/>blkB.group2.address;</highlight></codeline>
<codeline lineno="1673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1adecc2478d73cd7d18e1f88fd70d1488d" kindref="member">rdsTextAdress2B</ref><sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/><ref refid="class_s_i4735_1adecc2478d73cd7d18e1f88fd70d1488d" kindref="member">rdsTextAdress2B</ref><sp/>&lt;<sp/>16)</highlight></codeline>
<codeline lineno="1674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ab1f4f137139b40fe386ca51586999e50" kindref="member">getNext2Block</ref>(&amp;<ref refid="class_s_i4735_1a7aa607f80e97d45ac7a80cdcbdeb09f9" kindref="member">rds_buffer2B</ref>[<ref refid="class_s_i4735_1adecc2478d73cd7d18e1f88fd70d1488d" kindref="member">rdsTextAdress2B</ref><sp/>*<sp/>2]);</highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a7aa607f80e97d45ac7a80cdcbdeb09f9" kindref="member">rds_buffer2B</ref>;</highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1678"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1680"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1681"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1682"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1683"><highlight class="normal"></highlight></codeline>
<codeline lineno="1689" refid="class_s_i4735_1aa8436bb156f3ac8321c65941be42fdba" refkind="member"><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="class_s_i4735_1aa8436bb156f3ac8321c65941be42fdba" kindref="member">SI4735::getRdsTime</ref>()</highlight></codeline>
<codeline lineno="1690"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1691"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Under<sp/>Test<sp/>and<sp/>construction</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1692"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Need<sp/>to<sp/>check<sp/>the<sp/>Group<sp/>Type<sp/>before.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1693"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__rds__date__time" kindref="compound">si47x_rds_date_time</ref><sp/>dt;</highlight></codeline>
<codeline lineno="1694"><highlight class="normal"></highlight></codeline>
<codeline lineno="1695"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>minute;</highlight></codeline>
<codeline lineno="1696"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16_t<sp/>hour;</highlight></codeline>
<codeline lineno="1697"><highlight class="normal"></highlight></codeline>
<codeline lineno="1698"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1aa35366e5cded7b864f7268a7e4a8dbe9" kindref="member">getRdsGroupType</ref>()<sp/>==<sp/>4)</highlight></codeline>
<codeline lineno="1699"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>offset_sign;</highlight></codeline>
<codeline lineno="1701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>offset_h;</highlight></codeline>
<codeline lineno="1702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>offset_m;</highlight></codeline>
<codeline lineno="1703"><highlight class="normal"></highlight></codeline>
<codeline lineno="1704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>uint16_t<sp/>y,<sp/>m,<sp/>d;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1705"><highlight class="normal"></highlight></codeline>
<codeline lineno="1706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt.raw[4]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ac81b652130f0e91b2af8184e303b5d54" kindref="member">BLOCKBL</ref>;</highlight></codeline>
<codeline lineno="1707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt.raw[5]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1afc7f4e06b12a6d9b8304a691deb4fc8e" kindref="member">BLOCKBH</ref>;</highlight></codeline>
<codeline lineno="1708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt.raw[2]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1a9e02b88bb18b2111798c346c3f40e599" kindref="member">BLOCKCL</ref>;</highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt.raw[3]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1acb3be1a907d57f35a5db5dc79d1c4603" kindref="member">BLOCKCH</ref>;</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt.raw[0]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1ab2c92efdeed49c5fe867771fb5cd5862" kindref="member">BLOCKDL</ref>;</highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt.raw[1]<sp/>=<sp/><ref refid="class_s_i4735_1a42d5c6991d90ea1c8ae35b74f8bccc48" kindref="member">currentRdsStatus</ref>.resp.<ref refid="unionsi47x__rds__status_1a6e7bcc48e5ad38ae9a4754d90735e0eb" kindref="member">BLOCKDH</ref>;</highlight></codeline>
<codeline lineno="1712"><highlight class="normal"></highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Unfortunately<sp/>it<sp/>was<sp/>necessary<sp/>to<sp/>wotk<sp/>well<sp/>on<sp/>the<sp/>GCC<sp/>compiler<sp/>on<sp/>32-bit</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>platforms.<sp/>See<sp/>si47x_rds_date_time<sp/>(typedef<sp/>union)<sp/>and<sp/>CGG<sp/>Crosses<sp/>boundary<sp/>issue/features.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>it<sp/>is<sp/>working<sp/>on<sp/>Atmega328,<sp/>STM32,<sp/>Arduino<sp/>DUE,<sp/>ESP32<sp/>and<sp/>more.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>minute<sp/>=<sp/>(dt.refined.minute2<sp/>&lt;&lt;<sp/>2)<sp/>|<sp/>dt.refined.minute1;</highlight></codeline>
<codeline lineno="1717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hour<sp/>=<sp/>(dt.refined.hour2<sp/>&lt;&lt;<sp/>4)<sp/>|<sp/>dt.refined.hour1;</highlight></codeline>
<codeline lineno="1718"><highlight class="normal"></highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset_sign<sp/>=<sp/>(dt.refined.offset_sense<sp/>==<sp/>1)<sp/>?<sp/></highlight><highlight class="charliteral">&apos;+&apos;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="charliteral">&apos;-&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset_h<sp/>=<sp/>(dt.refined.offset<sp/>*<sp/>30)<sp/>/<sp/>60;</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset_m<sp/>=<sp/>(dt.refined.offset<sp/>*<sp/>30)<sp/>-<sp/>(offset_h<sp/>*<sp/>60);</highlight></codeline>
<codeline lineno="1722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sprintf(rds_time,<sp/>&quot;%02u:%02u<sp/>%c%02u:%02u&quot;,<sp/>dt.refined.hour,<sp/>dt.refined.minute,<sp/>offset_sign,<sp/>offset_h,<sp/>offset_m);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf(<ref refid="class_s_i4735_1a1746daa81b363880dd106fa430784bf8" kindref="member">rds_time</ref>,<sp/></highlight><highlight class="stringliteral">&quot;%02u:%02u<sp/>%c%02u:%02u&quot;</highlight><highlight class="normal">,<sp/>hour,<sp/>minute,<sp/>offset_sign,<sp/>offset_h,<sp/>offset_m);</highlight></codeline>
<codeline lineno="1724"><highlight class="normal"></highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a1746daa81b363880dd106fa430784bf8" kindref="member">rds_time</ref>;</highlight></codeline>
<codeline lineno="1726"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1727"><highlight class="normal"></highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1729"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1730"><highlight class="normal"></highlight></codeline>
<codeline lineno="1731"><highlight class="normal"></highlight></codeline>
<codeline lineno="1791" refid="class_s_i4735_1a55cf9a091d314a1aa21552f2254f756f" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a55cf9a091d314a1aa21552f2254f756f" kindref="member">SI4735::setSSBBfo</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>offset)</highlight></codeline>
<codeline lineno="1792"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1793"><highlight class="normal"></highlight></codeline>
<codeline lineno="1794"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__property" kindref="compound">si47x_property</ref><sp/>property;</highlight></codeline>
<codeline lineno="1795"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__frequency" kindref="compound">si47x_frequency</ref><sp/>bfo_offset;</highlight></codeline>
<codeline lineno="1796"><highlight class="normal"></highlight></codeline>
<codeline lineno="1797"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)<sp/></highlight><highlight class="comment">//<sp/>Only<sp/>for<sp/>AM/SSB<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1799"><highlight class="normal"></highlight></codeline>
<codeline lineno="1800"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="1801"><highlight class="normal"></highlight></codeline>
<codeline lineno="1802"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">property</highlight><highlight class="normal">.value<sp/>=<sp/>SSB_BFO;</highlight></codeline>
<codeline lineno="1803"><highlight class="normal"><sp/><sp/><sp/><sp/>bfo_offset.value<sp/>=<sp/>offset;</highlight></codeline>
<codeline lineno="1804"><highlight class="normal"></highlight></codeline>
<codeline lineno="1805"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="1806"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SET_PROPERTY);</highlight></codeline>
<codeline lineno="1807"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Always<sp/>0x00</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1808"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteHigh);<sp/></highlight><highlight class="comment">//<sp/>High<sp/>byte<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1809"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteLow);<sp/><sp/></highlight><highlight class="comment">//<sp/>Low<sp/>byte<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1810"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(bfo_offset.raw.<ref refid="unionsi47x__frequency_1ae85fcb4329c600511e2127e1c5029f8c" kindref="member">FREQH</ref>);<sp/><sp/></highlight><highlight class="comment">//<sp/>Offset<sp/>freq.<sp/>high<sp/>byte<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1811"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(bfo_offset.raw.FREQL);<sp/><sp/></highlight><highlight class="comment">//<sp/>Offset<sp/>freq.<sp/>low<sp/>byte<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1812"><highlight class="normal"></highlight></codeline>
<codeline lineno="1813"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="1814"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(550);</highlight></codeline>
<codeline lineno="1815"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1816"><highlight class="normal"></highlight></codeline>
<codeline lineno="1836" refid="class_s_i4735_1a9224e7d4ef14c887da96dbefd2dcefd3" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a9224e7d4ef14c887da96dbefd2dcefd3" kindref="member">SI4735::setSSBConfig</ref>(uint8_t<sp/>AUDIOBW,<sp/>uint8_t<sp/>SBCUTFLT,<sp/>uint8_t<sp/>AVC_DIVIDER,<sp/>uint8_t<sp/>AVCEN,<sp/>uint8_t<sp/>SMUTESEL,<sp/>uint8_t<sp/>DSP_AFCDIS)</highlight></codeline>
<codeline lineno="1837"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1838"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_s_i4735_1acc3d3a411d181e08846219661dbde1c4" kindref="member">currentTune</ref><sp/>==<sp/>FM_TUNE_FREQ)<sp/></highlight><highlight class="comment">//<sp/>Only<sp/>AM/SSB<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1840"><highlight class="normal"></highlight></codeline>
<codeline lineno="1841"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.AUDIOBW<sp/>=<sp/>AUDIOBW;</highlight></codeline>
<codeline lineno="1842"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1ae22aa453dbf8787acceef11d30306dfd" kindref="member">SBCUTFLT</ref><sp/>=<sp/>SBCUTFLT;</highlight></codeline>
<codeline lineno="1843"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1a3c4def7aad4a7f875bd189cfde29c733" kindref="member">AVC_DIVIDER</ref><sp/>=<sp/>AVC_DIVIDER;</highlight></codeline>
<codeline lineno="1844"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1abdcac9b7553fc2d62f51262eacec0069" kindref="member">AVCEN</ref><sp/>=<sp/>AVCEN;</highlight></codeline>
<codeline lineno="1845"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1aeed76b90e22efa54ef80062032785bc2" kindref="member">SMUTESEL</ref><sp/>=<sp/>SMUTESEL;</highlight></codeline>
<codeline lineno="1846"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1a5c337f3327b40a61d5ccc22141892651" kindref="member">DUMMY1</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1847"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1a12c18df3a3e8d78325292f50e222bd01" kindref="member">DSP_AFCDIS</ref><sp/>=<sp/>DSP_AFCDIS;</highlight></codeline>
<codeline lineno="1848"><highlight class="normal"></highlight></codeline>
<codeline lineno="1849"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">sendSSBModeProperty</ref>();</highlight></codeline>
<codeline lineno="1850"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1851"><highlight class="normal"></highlight></codeline>
<codeline lineno="1859" refid="class_s_i4735_1a6cde26a5abf759a628012d1457d85c72" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a6cde26a5abf759a628012d1457d85c72" kindref="member">SI4735::setSSBDspAfc</ref>(uint8_t<sp/>DSP_AFCDIS)</highlight></codeline>
<codeline lineno="1860"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1861"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1a12c18df3a3e8d78325292f50e222bd01" kindref="member">DSP_AFCDIS</ref><sp/>=<sp/>DSP_AFCDIS;</highlight></codeline>
<codeline lineno="1862"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">sendSSBModeProperty</ref>();</highlight></codeline>
<codeline lineno="1863"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1864"><highlight class="normal"></highlight></codeline>
<codeline lineno="1865"><highlight class="normal"></highlight></codeline>
<codeline lineno="1873" refid="class_s_i4735_1a91251dfc2ff9488aaef3aa1a528097d9" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a91251dfc2ff9488aaef3aa1a528097d9" kindref="member">SI4735::setSSBSoftMute</ref>(uint8_t<sp/>SMUTESEL)</highlight></codeline>
<codeline lineno="1874"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1875"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1aeed76b90e22efa54ef80062032785bc2" kindref="member">SMUTESEL</ref><sp/>=<sp/>SMUTESEL;</highlight></codeline>
<codeline lineno="1876"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">sendSSBModeProperty</ref>();</highlight></codeline>
<codeline lineno="1877"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1878"><highlight class="normal"></highlight></codeline>
<codeline lineno="1886" refid="class_s_i4735_1acacf1dac4c0ec170d1da629dd1fd30cb" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1acacf1dac4c0ec170d1da629dd1fd30cb" kindref="member">SI4735::setSSBAutomaticVolumeControl</ref>(uint8_t<sp/>AVCEN)</highlight></codeline>
<codeline lineno="1887"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1888"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1abdcac9b7553fc2d62f51262eacec0069" kindref="member">AVCEN</ref><sp/>=<sp/>AVCEN;</highlight></codeline>
<codeline lineno="1889"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">sendSSBModeProperty</ref>();</highlight></codeline>
<codeline lineno="1890"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1891"><highlight class="normal"></highlight></codeline>
<codeline lineno="1899" refid="class_s_i4735_1afc5e87c50a1eba6de9504c114cc1cb70" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1afc5e87c50a1eba6de9504c114cc1cb70" kindref="member">SI4735::setSSBAvcDivider</ref>(uint8_t<sp/>AVC_DIVIDER)</highlight></codeline>
<codeline lineno="1900"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1901"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1a3c4def7aad4a7f875bd189cfde29c733" kindref="member">AVC_DIVIDER</ref><sp/>=<sp/>AVC_DIVIDER;</highlight></codeline>
<codeline lineno="1902"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">sendSSBModeProperty</ref>();</highlight></codeline>
<codeline lineno="1903"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1904"><highlight class="normal"></highlight></codeline>
<codeline lineno="1915" refid="class_s_i4735_1ae9d50b24642784943fefedbac944a8e8" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ae9d50b24642784943fefedbac944a8e8" kindref="member">SI4735::setSBBSidebandCutoffFilter</ref>(uint8_t<sp/>SBCUTFLT)</highlight></codeline>
<codeline lineno="1916"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1917"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.<ref refid="unionsi47x__ssb__mode_1ae22aa453dbf8787acceef11d30306dfd" kindref="member">SBCUTFLT</ref><sp/>=<sp/>SBCUTFLT;</highlight></codeline>
<codeline lineno="1918"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">sendSSBModeProperty</ref>();</highlight></codeline>
<codeline lineno="1919"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1920"><highlight class="normal"></highlight></codeline>
<codeline lineno="1944" refid="class_s_i4735_1a6b2ad4d027463262350134490d16bf32" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a6b2ad4d027463262350134490d16bf32" kindref="member">SI4735::setSSBAudioBandwidth</ref>(uint8_t<sp/>AUDIOBW)</highlight></codeline>
<codeline lineno="1945"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1946"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Sets<sp/>the<sp/>audio<sp/>filter<sp/>property<sp/>parameter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1947"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.param.AUDIOBW<sp/>=<sp/>AUDIOBW;</highlight></codeline>
<codeline lineno="1948"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">sendSSBModeProperty</ref>();</highlight></codeline>
<codeline lineno="1949"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1950"><highlight class="normal"></highlight></codeline>
<codeline lineno="1961" refid="class_s_i4735_1a3e907ddf560a0c8286fa55768701b3da" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>SI4735::setSSB(uint8_t<sp/>usblsb)</highlight></codeline>
<codeline lineno="1962"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1963"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Is<sp/>it<sp/>needed<sp/>to<sp/>load<sp/>patch<sp/>when<sp/>switch<sp/>to<sp/>SSB?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1964"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>powerDown();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1965"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>It<sp/>starts<sp/>with<sp/>the<sp/>same<sp/>AM<sp/>parameters.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1966"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a8bc001cb28dc8fbd88ba0fa7024eca39" kindref="member">setPowerUp</ref>(1,<sp/>1,<sp/>0,<sp/>1,<sp/>1,<sp/>SI473X_ANALOG_AUDIO);</highlight></codeline>
<codeline lineno="1967"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3e228da65641f4dcf4253262e19bde9b" kindref="member">radioPowerUp</ref>();</highlight></codeline>
<codeline lineno="1968"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ssbPowerUp();<sp/>//<sp/>Not<sp/>used<sp/>for<sp/>regular<sp/>operation</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1969"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a3b7543657dfd36da962267bb8692b796" kindref="member">setVolume</ref>(volume);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>previus<sp/>configured<sp/>volume</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1970"><highlight class="normal"><sp/><sp/><sp/><sp/>currentSsbStatus<sp/>=<sp/>usblsb;</highlight></codeline>
<codeline lineno="1971"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a157e4ae8cd53396973584aa10888cd47" kindref="member">lastMode</ref><sp/>=<sp/>SSB_CURRENT_MODE;</highlight></codeline>
<codeline lineno="1972"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1973"><highlight class="normal"></highlight></codeline>
<codeline lineno="1974"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="1975"><highlight class="comment"><sp/>*<sp/>Set<sp/>the<sp/>radio<sp/>to<sp/>SSB<sp/>(LW/MW/SW)<sp/>function.<sp/></highlight></codeline>
<codeline lineno="1976"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="1977"><highlight class="comment"><sp/>*<sp/>@see<sp/>AN332<sp/>REV<sp/>0.8<sp/>UNIVERSAL<sp/>PROGRAMMING<sp/>GUIDE;<sp/>pages<sp/>13<sp/>and<sp/>14</highlight></codeline>
<codeline lineno="1978"><highlight class="comment"><sp/>*<sp/></highlight></codeline>
<codeline lineno="1979"><highlight class="comment"><sp/>*<sp/>@param<sp/>fromFreq<sp/>minimum<sp/>frequency<sp/>for<sp/>the<sp/>band</highlight></codeline>
<codeline lineno="1980"><highlight class="comment"><sp/>*<sp/>@param<sp/>toFreq<sp/>maximum<sp/>frequency<sp/>for<sp/>the<sp/>band</highlight></codeline>
<codeline lineno="1981"><highlight class="comment"><sp/>*<sp/>@param<sp/>initialFreq<sp/>initial<sp/>frequency<sp/></highlight></codeline>
<codeline lineno="1982"><highlight class="comment"><sp/>*<sp/>@param<sp/>step<sp/>step<sp/>used<sp/>to<sp/>go<sp/>to<sp/>the<sp/>next<sp/>channel<sp/><sp/></highlight></codeline>
<codeline lineno="1983"><highlight class="comment"><sp/>*<sp/>@param<sp/>usblsb<sp/>SSB<sp/>Upper<sp/>Side<sp/>Band<sp/>(USB)<sp/>and<sp/>Lower<sp/>Side<sp/>Band<sp/>(LSB)<sp/>Selection;<sp/></highlight></codeline>
<codeline lineno="1984"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value<sp/>2<sp/>(banary<sp/>10)<sp/>=<sp/>USB;<sp/></highlight></codeline>
<codeline lineno="1985"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value<sp/>1<sp/>(banary<sp/>01)<sp/>=<sp/>LSB.<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1986"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1987"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>SI4735::setSSB(uint16_t<sp/>fromFreq,<sp/>uint16_t<sp/>toFreq,<sp/>uint16_t<sp/>initialFreq,<sp/>uint16_t<sp/>step,<sp/>uint8_t<sp/>usblsb)</highlight></codeline>
<codeline lineno="1988"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1989"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a4663c1c92d980472556368944cb2fc68" kindref="member">currentMinimumFrequency</ref><sp/>=<sp/>fromFreq;</highlight></codeline>
<codeline lineno="1990"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aa3d41ad3fdb9d821a721a8acfaf47670" kindref="member">currentMaximumFrequency</ref><sp/>=<sp/>toFreq;</highlight></codeline>
<codeline lineno="1991"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1ad72759f246cceb147bf031b72173b0ca" kindref="member">currentStep</ref><sp/>=<sp/>step;</highlight></codeline>
<codeline lineno="1992"><highlight class="normal"></highlight></codeline>
<codeline lineno="1993"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(initialFreq<sp/>&lt;<sp/>fromFreq<sp/>||<sp/>initialFreq<sp/>&gt;<sp/>toFreq)</highlight></codeline>
<codeline lineno="1994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initialFreq<sp/>=<sp/>fromFreq;</highlight></codeline>
<codeline lineno="1995"><highlight class="normal"></highlight></codeline>
<codeline lineno="1996"><highlight class="normal"><sp/><sp/><sp/><sp/>setSSB(usblsb);</highlight></codeline>
<codeline lineno="1997"><highlight class="normal"></highlight></codeline>
<codeline lineno="1998"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref><sp/>=<sp/>initialFreq;</highlight></codeline>
<codeline lineno="1999"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a63d205f2d3169ba877a2bd2ee28d224f" kindref="member">setFrequency</ref>(<ref refid="class_s_i4735_1a9da4f3df9e5e6b0448eff15e12f690dd" kindref="member">currentWorkFrequency</ref>);</highlight></codeline>
<codeline lineno="2000"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(550);</highlight></codeline>
<codeline lineno="2001"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2002"><highlight class="normal"></highlight></codeline>
<codeline lineno="2007" refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1ae1d866bfc4cb37c4268c8942b4b4d062" kindref="member">SI4735::sendSSBModeProperty</ref>()</highlight></codeline>
<codeline lineno="2008"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2009"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__property" kindref="compound">si47x_property</ref><sp/>property;</highlight></codeline>
<codeline lineno="2010"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">property</highlight><highlight class="normal">.value<sp/>=<sp/>SSB_MODE;</highlight></codeline>
<codeline lineno="2011"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="2012"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="2013"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SET_PROPERTY);</highlight></codeline>
<codeline lineno="2014"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0x00);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Always<sp/>0x00</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2015"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteHigh);<sp/></highlight><highlight class="comment">//<sp/>High<sp/>byte<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2016"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(property.raw.byteLow);<sp/><sp/></highlight><highlight class="comment">//<sp/>Low<sp/>byte<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2017"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.raw[1]);<sp/></highlight><highlight class="comment">//<sp/>SSB<sp/>MODE<sp/>params;<sp/>freq.<sp/>high<sp/>byte<sp/>first</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2018"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(<ref refid="class_s_i4735_1a74ee9c99b1e092f7b1efa2f771f38324" kindref="member">currentSSBMode</ref>.raw[0]);<sp/></highlight><highlight class="comment">//<sp/>SSB<sp/>MODE<sp/>params;<sp/>freq.<sp/>low<sp/>byte<sp/>after</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2019"><highlight class="normal"></highlight></codeline>
<codeline lineno="2020"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2021"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(550);</highlight></codeline>
<codeline lineno="2022"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2023"><highlight class="normal"></highlight></codeline>
<codeline lineno="2024"><highlight class="normal"></highlight></codeline>
<codeline lineno="2054" refid="class_s_i4735_1adfc2c82524918224cf19fec5b7fcf6d1" refkind="member"><highlight class="normal"><ref refid="unionsi47x__firmware__query__library" kindref="compound">si47x_firmware_query_library</ref><sp/><ref refid="class_s_i4735_1adfc2c82524918224cf19fec5b7fcf6d1" kindref="member">SI4735::queryLibraryId</ref>()</highlight></codeline>
<codeline lineno="2055"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2056"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="unionsi47x__firmware__query__library" kindref="compound">si47x_firmware_query_library</ref><sp/>libraryID;</highlight></codeline>
<codeline lineno="2057"><highlight class="normal"></highlight></codeline>
<codeline lineno="2058"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1aa554b3390fb6c5a4d6661b96afae73ae" kindref="member">powerDown</ref>();<sp/></highlight><highlight class="comment">//<sp/>Is<sp/>it<sp/>necessary</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2059"><highlight class="normal"></highlight></codeline>
<codeline lineno="2060"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>delay(500);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2061"><highlight class="normal"></highlight></codeline>
<codeline lineno="2062"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="2063"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="2064"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(POWER_UP);</highlight></codeline>
<codeline lineno="2065"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0b00011111);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>Read<sp/>Library<sp/>ID,<sp/>disable<sp/>interrupt;<sp/>disable<sp/>GPO2OEN;<sp/>boot<sp/>normaly;<sp/>enable<sp/>External<sp/>Crystal<sp/>Oscillator<sp/><sp/>.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2066"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SI473X_ANALOG_AUDIO);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>Analog<sp/>Line<sp/>Input.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2067"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2068"><highlight class="normal"></highlight></codeline>
<codeline lineno="2069"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2070"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="2072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>8);</highlight></codeline>
<codeline lineno="2073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)</highlight></codeline>
<codeline lineno="2074"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>libraryID.raw[i]<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="2075"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(libraryID.resp.ERR);<sp/></highlight><highlight class="comment">//<sp/>If<sp/>error<sp/>found,<sp/>try<sp/>it<sp/>again.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2076"><highlight class="normal"></highlight></codeline>
<codeline lineno="2077"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(2500);</highlight></codeline>
<codeline lineno="2078"><highlight class="normal"></highlight></codeline>
<codeline lineno="2079"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>libraryID;</highlight></codeline>
<codeline lineno="2080"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2081"><highlight class="normal"></highlight></codeline>
<codeline lineno="2082"><highlight class="normal"></highlight></codeline>
<codeline lineno="2091" refid="class_s_i4735_1afaabd6c73b7ad7c20ae959d5b75c1e71" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1afaabd6c73b7ad7c20ae959d5b75c1e71" kindref="member">SI4735::patchPowerUp</ref>()</highlight></codeline>
<codeline lineno="2092"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2093"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="2094"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="2095"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(POWER_UP);</highlight></codeline>
<codeline lineno="2096"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0b00110001);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>AM,<sp/>Enable<sp/>External<sp/>Crystal<sp/>Oscillator;<sp/>Set<sp/>patch<sp/>enable;<sp/>GPO2<sp/>output<sp/>disabled;<sp/>CTS<sp/>interrupt<sp/>disabled.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2097"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(SI473X_ANALOG_AUDIO);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>Analog<sp/>Output</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2098"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2099"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(2500);</highlight></codeline>
<codeline lineno="2100"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2101"><highlight class="normal"></highlight></codeline>
<codeline lineno="2106" refid="class_s_i4735_1a6f045d3725a457116236ee92d41c4265" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a6f045d3725a457116236ee92d41c4265" kindref="member">SI4735::ssbSetup</ref>()</highlight></codeline>
<codeline lineno="2107"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>setPowerUp(powerUp.arg.CTSIEN,<sp/>0,<sp/>0,<sp/>1,<sp/>1,<sp/>SI473X_ANALOG_AUDIO);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2109"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1adc6014674bd4d1ee3aab56c605926db1" kindref="member">reset</ref>();</highlight></codeline>
<codeline lineno="2110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>radioPowerUp();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2111"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2112"><highlight class="normal"></highlight></codeline>
<codeline lineno="2113"><highlight class="normal"></highlight></codeline>
<codeline lineno="2117" refid="class_s_i4735_1a0fcfd8e487c594707b3f2aaa71a86d68" refkind="member"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1a0fcfd8e487c594707b3f2aaa71a86d68" kindref="member">SI4735::ssbPowerUp</ref>()</highlight></codeline>
<codeline lineno="2118"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2119"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="2120"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="2121"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(POWER_UP);</highlight></codeline>
<codeline lineno="2122"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0b00010001);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>AM/SSB,<sp/>disable<sp/>interrupt;<sp/>disable<sp/>GPO2OEN;<sp/>boot<sp/>normaly;<sp/>enable<sp/>External<sp/>Crystal<sp/>Oscillator<sp/><sp/>.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2123"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0b00000101);<sp/></highlight><highlight class="comment">//<sp/>Set<sp/>to<sp/>Analog<sp/>Line<sp/>Input.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2124"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2125"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(2500);</highlight></codeline>
<codeline lineno="2126"><highlight class="normal"></highlight></codeline>
<codeline lineno="2127"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1a21297439eccc575f7c0a3228a4061fa7" kindref="member">CTSIEN</ref><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>-&gt;<sp/>Interrupt<sp/>anabled;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2128"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1a6da21e782c18e0d15791f712e602bf0f" kindref="member">GPO2OEN</ref><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>-&gt;<sp/>GPO2<sp/>Output<sp/>Enable;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2129"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1aff3f1655e972eff4630c66f0b4ec7704" kindref="member">PATCH</ref><sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0<sp/>-&gt;<sp/>Boot<sp/>normally;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2130"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1ae68c435fb0ff2ad54bc17ac794a482c1" kindref="member">XOSCEN</ref><sp/>=<sp/>1;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>-&gt;<sp/>Use<sp/>external<sp/>crystal<sp/>oscillator;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2131"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.FUNC<sp/>=<sp/>1;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>0<sp/>=<sp/>FM<sp/>Receive;<sp/>1<sp/>=<sp/>AM/SSB<sp/>(LW/MW/SW)<sp/>Receiver.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2132"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a1331b701088bda20bf0844e2e38be142" kindref="member">powerUp</ref>.arg.<ref refid="unionsi473x__powerup_1a5deeab3cdc44cc652b6e8867dd8e9833" kindref="member">OPMODE</ref><sp/>=<sp/>0b00000101;<sp/></highlight><highlight class="comment">//<sp/>0x5<sp/>=<sp/>00000101<sp/>=<sp/>Analog<sp/>audio<sp/>outputs<sp/>(LOUT/ROUT).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2133"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2134"><highlight class="normal"></highlight></codeline>
<codeline lineno="2170" refid="class_s_i4735_1afd1343bd8b4f0c290ef81c418222036c" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1afd1343bd8b4f0c290ef81c418222036c" kindref="member">SI4735::downloadPatch</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8_t<sp/>*ssb_patch_content,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint16_t<sp/>ssb_patch_content_size)</highlight></codeline>
<codeline lineno="2171"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2172"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>content;</highlight></codeline>
<codeline lineno="2173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">register</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i,<sp/>offset;</highlight></codeline>
<codeline lineno="2174"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Send<sp/>patch<sp/>to<sp/>the<sp/>SI4735<sp/>device</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2175"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(offset<sp/>=<sp/>0;<sp/>offset<sp/>&lt;<sp/>(int)<sp/>ssb_patch_content_size;<sp/>offset<sp/>+=<sp/>8)</highlight></codeline>
<codeline lineno="2176"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="2178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)</highlight></codeline>
<codeline lineno="2179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>content<sp/>=<sp/>pgm_read_byte_near(ssb_patch_content<sp/>+<sp/>(i<sp/>+<sp/>offset));</highlight></codeline>
<codeline lineno="2181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(content);</highlight></codeline>
<codeline lineno="2182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2184"><highlight class="normal"></highlight></codeline>
<codeline lineno="2185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Testing<sp/>download<sp/>performance</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>approach<sp/>1<sp/>-<sp/>Faster<sp/>-<sp/>less<sp/>secure<sp/>(it<sp/>might<sp/>crash<sp/>in<sp/>some<sp/>architectures)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMicroseconds(MIN_DELAY_WAIT_SEND_LOOP);<sp/></highlight><highlight class="comment">//<sp/>Need<sp/>check<sp/>the<sp/>minimum<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2188"><highlight class="normal"></highlight></codeline>
<codeline lineno="2189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>approach<sp/>2<sp/>-<sp/>More<sp/>control.<sp/>A<sp/>little<sp/>more<sp/>secure<sp/>than<sp/>approach<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2191"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>do</highlight></codeline>
<codeline lineno="2192"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2193"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delayMicroseconds(150);<sp/>//<sp/>Minimum<sp/>delay<sp/>founded<sp/>(Need<sp/>check<sp/>the<sp/>minimum<sp/>value)</highlight></codeline>
<codeline lineno="2194"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(deviceAddress,<sp/>1);</highlight></codeline>
<codeline lineno="2195"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>while<sp/>(!(Wire.read()<sp/>&amp;<sp/>B10000000));</highlight></codeline>
<codeline lineno="2196"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2197"><highlight class="normal"></highlight></codeline>
<codeline lineno="2198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>approach<sp/>3<sp/>-<sp/>same<sp/>approach<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>waitToSend();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2200"><highlight class="normal"></highlight></codeline>
<codeline lineno="2201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>approach<sp/>4<sp/>-<sp/>safer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2203"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>waitToSend();</highlight></codeline>
<codeline lineno="2204"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>cmd_status;</highlight></codeline>
<codeline lineno="2205"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Uncomment<sp/>the<sp/>lines<sp/>below<sp/>if<sp/>you<sp/>want<sp/>to<sp/>check<sp/>erro.</highlight></codeline>
<codeline lineno="2206"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(deviceAddress,<sp/>1);</highlight></codeline>
<codeline lineno="2207"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_status<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="2208"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>The<sp/>SI4735<sp/>issues<sp/>a<sp/>status<sp/>after<sp/>each<sp/>8<sp/>byte<sp/>transfered.</highlight></codeline>
<codeline lineno="2209"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Just<sp/>the<sp/>bit<sp/>7<sp/>(CTS)<sp/>should<sp/>be<sp/>seted.<sp/>if<sp/>bit<sp/>6<sp/>(ERR)<sp/>is<sp/>seted,<sp/>the<sp/>system<sp/>halts.</highlight></codeline>
<codeline lineno="2210"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(cmd_status<sp/>!=<sp/>0x80)</highlight></codeline>
<codeline lineno="2211"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>false;</highlight></codeline>
<codeline lineno="2212"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2213"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2214"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(250);</highlight></codeline>
<codeline lineno="2215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2216"><highlight class="normal">}</highlight></codeline>
<codeline lineno="2217"><highlight class="normal"></highlight></codeline>
<codeline lineno="2229" refid="class_s_i4735_1aa99cdde8dd65eb92f2ada159cc215c98" refkind="member"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_s_i4735_1afd1343bd8b4f0c290ef81c418222036c" kindref="member">SI4735::downloadPatch</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>eeprom_i2c_address)</highlight></codeline>
<codeline lineno="2230"><highlight class="normal">{</highlight></codeline>
<codeline lineno="2231"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ssb_patch_content_size;</highlight></codeline>
<codeline lineno="2232"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>cmd_status;</highlight></codeline>
<codeline lineno="2233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i,<sp/>offset;</highlight></codeline>
<codeline lineno="2234"><highlight class="normal"><sp/><sp/><sp/><sp/>uint8_t<sp/>eepromPage[8];</highlight></codeline>
<codeline lineno="2235"><highlight class="normal"></highlight></codeline>
<codeline lineno="2236"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">union<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="2237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>lowByte;</highlight></codeline>
<codeline lineno="2240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint8_t<sp/>highByte;</highlight></codeline>
<codeline lineno="2241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>raw;</highlight></codeline>
<codeline lineno="2242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16_t<sp/>value;</highlight></codeline>
<codeline lineno="2243"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/>eeprom;</highlight></codeline>
<codeline lineno="2244"><highlight class="normal"></highlight></codeline>
<codeline lineno="2245"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>first<sp/>two<sp/>bytes<sp/>are<sp/>the<sp/>size<sp/>of<sp/>the<sp/>patches</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>the<sp/>position<sp/>in<sp/>the<sp/>eeprom<sp/>to<sp/>read<sp/>the<sp/>size<sp/>of<sp/>the<sp/>patch<sp/>content</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2247"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.beginTransmission(eeprom_i2c_address);</highlight></codeline>
<codeline lineno="2248"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0);<sp/></highlight><highlight class="comment">//<sp/>writes<sp/>the<sp/>most<sp/>significant<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2249"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.write(0);<sp/></highlight><highlight class="comment">//<sp/>writes<sp/>the<sp/>less<sp/>significant<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2250"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2251"><highlight class="normal"><sp/><sp/><sp/><sp/>Wire.requestFrom(eeprom_i2c_address,<sp/>2);</highlight></codeline>
<codeline lineno="2252"><highlight class="normal"><sp/><sp/><sp/><sp/>eeprom.raw.highByte<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="2253"><highlight class="normal"><sp/><sp/><sp/><sp/>eeprom.raw.lowByte<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="2254"><highlight class="normal"></highlight></codeline>
<codeline lineno="2255"><highlight class="normal"><sp/><sp/><sp/><sp/>ssb_patch_content_size<sp/>=<sp/>eeprom.value;</highlight></codeline>
<codeline lineno="2256"><highlight class="normal"></highlight></codeline>
<codeline lineno="2257"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>patch<sp/>content<sp/>starts<sp/>on<sp/>position<sp/>2<sp/>(the<sp/>first<sp/>two<sp/>bytes<sp/>are<sp/>the<sp/>size<sp/>of<sp/>the<sp/>patch)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2258"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(offset<sp/>=<sp/>2;<sp/>offset<sp/>&lt;<sp/>ssb_patch_content_size;<sp/>offset<sp/>+=<sp/>8)</highlight></codeline>
<codeline lineno="2259"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="2260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>the<sp/>position<sp/>in<sp/>the<sp/>eeprom<sp/>to<sp/>read<sp/>next<sp/>8<sp/>bytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eeprom.value<sp/>=<sp/>offset;</highlight></codeline>
<codeline lineno="2262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.beginTransmission(eeprom_i2c_address);</highlight></codeline>
<codeline lineno="2263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(eeprom.raw.highByte);<sp/></highlight><highlight class="comment">//<sp/>writes<sp/>the<sp/>most<sp/>significant<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(eeprom.raw.lowByte);<sp/><sp/></highlight><highlight class="comment">//<sp/>writes<sp/>the<sp/>less<sp/>significant<sp/>byte</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2266"><highlight class="normal"></highlight></codeline>
<codeline lineno="2267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reads<sp/>the<sp/>next<sp/>8<sp/>bytes<sp/>from<sp/>eeprom</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(eeprom_i2c_address,<sp/>8);</highlight></codeline>
<codeline lineno="2269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)</highlight></codeline>
<codeline lineno="2270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eepromPage[i]<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="2271"><highlight class="normal"></highlight></codeline>
<codeline lineno="2272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sends<sp/>the<sp/>page<sp/>(8<sp/>bytes)<sp/>to<sp/>the<sp/>SI4735</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.beginTransmission(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>);</highlight></codeline>
<codeline lineno="2274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>8;<sp/>i++)</highlight></codeline>
<codeline lineno="2275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.write(eepromPage[i]);</highlight></codeline>
<codeline lineno="2276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.endTransmission();</highlight></codeline>
<codeline lineno="2277"><highlight class="normal"></highlight></codeline>
<codeline lineno="2278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_s_i4735_1a7b45c1b22c3c1a3f2326bee913d1e1e0" kindref="member">waitToSend</ref>();</highlight></codeline>
<codeline lineno="2279"><highlight class="normal"></highlight></codeline>
<codeline lineno="2280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Wire.requestFrom(<ref refid="class_s_i4735_1a243ecc7d01fc0d0e9cabb4ed00b9e47d" kindref="member">deviceAddress</ref>,<sp/>1);</highlight></codeline>
<codeline lineno="2281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_status<sp/>=<sp/>Wire.read();</highlight></codeline>
<codeline lineno="2282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>The<sp/>SI4735<sp/>issues<sp/>a<sp/>status<sp/>after<sp/>each<sp/>8<sp/>byte<sp/>transfered.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Just<sp/>the<sp/>bit<sp/>7<sp/>(CTS)<sp/>should<sp/>be<sp/>seted.<sp/>if<sp/>bit<sp/>6<sp/>(ERR)<sp/>is<sp/>seted,<sp/>the<sp/>system<sp/>halts.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd_status<sp/>!=<sp/>0x80)</highlight></codeline>
<codeline lineno="2285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2286"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="2287"><highlight class="normal"><sp/><sp/><sp/><sp/>delayMicroseconds(250);</highlight></codeline>
<codeline lineno="2288"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="2289"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="SI4735/SI4735.cpp"/>
  </compounddef>
</doxygen>
